(function(a){function b(b){return a.data(b,"tooltip")}function d(c){b(this).delay?m=setTimeout(e,b(this).delay):e();r=!!b(this).track;a(document.body).bind("mousemove",f);f(c)}function c(){if(!a.tooltip.blocked&&this!=n&&(this.tooltipText||b(this).bodyHandler)){n=this;v=this.tooltipText;if(b(this).bodyHandler){h.title.hide();var c=b(this).bodyHandler.call(this);c.nodeType||c.jquery?h.body.empty().append(c):h.body.html(c);h.body.show()}else if(b(this).showBody){c=v.split(b(this).showBody);h.title.html(c.shift()).show();
h.body.empty();for(var g=0,e;e=c[g];g++)0<g&&h.body.append("<br/>"),h.body.append(e);h.body.hideWhenEmpty()}else h.title.html(v).show(),h.body.hide();b(this).showURL&&a(this).url()?h.url.html(a(this).url().replace("http://","")).show():h.url.hide();h.parent.addClass(b(this).extraClass);b(this).fixPNG&&h.parent.fixPNG();d.apply(this,arguments)}}function e(){m=null;l&&a.fn.bgiframe||!b(n).fade?h.parent.show():h.parent.is(":animated")?h.parent.stop().show().fadeTo(b(n).fade,n.tOpacity):h.parent.is(":visible")?
h.parent.fadeTo(b(n).fade,n.tOpacity):h.parent.fadeIn(b(n).fade);f()}function f(c){if(!(a.tooltip.blocked||c&&"OPTION"==c.target.tagName))if(!r&&h.parent.is(":visible")&&a(document.body).unbind("mousemove",f),null==n)a(document.body).unbind("mousemove",f);else{h.parent.removeClass("viewport-right").removeClass("viewport-bottom");var g=h.parent[0].offsetLeft,d=h.parent[0].offsetTop;c&&(g=c.pageX+b(n).left,d=c.pageY+b(n).top,c="auto",b(n).positionLeft&&(c=a(window).width()-g,g="auto"),h.parent.css({left:g,
right:c,top:d}));c=a(window).scrollLeft();var e=a(window).scrollTop(),l=a(window).width(),v=a(window).height(),m=h.parent[0];c+l<m.offsetLeft+m.offsetWidth&&(g-=m.offsetWidth+20+b(n).left,h.parent.css({left:g+"px"}).addClass("viewport-right"));e+v<m.offsetTop+m.offsetHeight&&(d-=m.offsetHeight+20+b(n).top,h.parent.css({top:d+"px"}).addClass("viewport-bottom"))}}function g(c){function g(){h.parent.removeClass(d.extraClass).hide().css("opacity","")}if(!a.tooltip.blocked){m&&clearTimeout(m);n=null;var d=
b(this);l&&a.fn.bgiframe||!d.fade?g():h.parent.is(":animated")?h.parent.stop().fadeTo(d.fade,0,g):h.parent.stop().fadeOut(d.fade,g);b(this).fixPNG&&h.parent.unfixPNG()}}var h={},n,v,m,l=a.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),r=!1;a.tooltip={blocked:!1,defaults:{delay:0,fade:100,showURL:!1,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){a.tooltip.blocked=!a.tooltip.blocked}};a.fn.extend({tooltip:function(b){b=a.extend({},a.tooltip.defaults,b);h.parent||(h.parent=a('<div id="'+
b.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide(),a.fn.bgiframe&&h.parent.bgiframe(),h.title=a("h3",h.parent),h.body=a("div.body",h.parent),h.url=a("div.url",h.parent));return this.each(function(){a.data(this,"tooltip",b);this.tOpacity=h.parent.css("opacity");this.tooltipText=this.title;a(this).removeAttr("title");this.alt=""}).mouseover(c).mouseout(g).click(g)},fixPNG:l?function(){return this.each(function(){var b=a(this).css("backgroundImage");
b.match(/^url\(["']?(.*\.png)["']?\)$/i)&&(b=RegExp.$1,a(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+b+"')"}).each(function(){var b=a(this).css("position");"absolute"!=b&&"relative"!=b&&a(this).css("position","relative")}))})}:function(){return this},unfixPNG:l?function(){return this.each(function(){a(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){a(this)[a(this).html()?
"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}})})(jQuery);
var WgPalette=function(a){this.colors=a;this.getRGB=function(a){var d,c,e;a=parseFloat(a);if(!this.colors)return"#FFFFFF";c=this.colors[0];var f=this.colors[this.colors.length-1];if(a>=f[0])a=f[1],d=f[2],c=f[3];else if(a<=c[0])a=c[1],d=c[2],c=c[3];else{for(d=0;d<=this.colors.length-2;d++)if(a>=this.colors[d][0]&&a<=this.colors[d+1][0]){c=this.colors[d];f=this.colors[d+1];break}e=(a-c[0])/(f[0]-c[0]);a=c[1]+e*(f[1]-c[1]);d=c[2]+e*(f[2]-c[2]);c=c[3]+e*(f[3]-c[3])}a=Math.round(a).toString(16);d=Math.round(d).toString(16);
c=Math.round(c).toString(16);2>a.length&&(a="0"+a);2>d.length&&(d="0"+d);2>c.length&&(c="0"+c);return("#"+a+d+c).toUpperCase()}},WgUtil={mouse:{},isDefined:function(a){return"undefined"!==typeof a?!0:!1},getLangText:function(a,b){return WgLang[a]&&WgLang[a][b]?WgLang[a][b]:"??"},addOpt:function(a,b,d,c){b=new Option(d,b);c?a.options[c]=b:a.options[a.options.length]=b},optExist:function(a,b){for(var d=0;d<a.options.length;d++)if(a.options[d].value==b)return!0;return!1},pridejOption:function(a,b){for(var d=
b.length,c=0;c<a.length;c++)if(null!=a.options[c]&&a.options[c].selected){for(var e=!1,f=0;f<d;f++)if(null!=b.options[f]&&a.options[c].value==b.options[f].value){e=!0;break}1!=e&&(b.options[d]=new Option(a.options[c].text),b.options[d].value=a.options[c].value,d++)}},uberOption:function(a){for(var b=a.options.length-1;0<=b;b--)null!=a.options[b]&&1==a.options[b].selected&&(a.options[b]=null)},selAll:function(a){for(var b=0;b<a.length;b++)a.options[b].selected=!0},wgUserInfoWindow:function(){"undefined"!=
typeof jQuery&&$(".wgfcst-awginfo,.awginfo").click(function(a){a.preventDefault();$("#awginfo-div").length||$("body").append("<div id='awginfo-div' style='position: absolute; z-index: 999; display: none; background-color: #FFFFFF; padding:7px; border: 1px solid #666666;width:400px'></div>");var b=$(this).attr("wgwidth"),d=$(this).attr("wgheight");b&&$("#awginfo-div").css("width",b);d&&$("#awginfo-div").css("height",d);$("#awginfo-div").empty().load($(this).attr("href"),function(){$("#awginfo-div").prepend('<img alt="close" style="float: right" src="img/close.gif"/>')}).css("left",
a.pageX+20).css("top",a.pageY-100).show().click(function(){$(this).hide()})})},wgWindow:function(a){if("undefined"!=typeof jQuery){var b={close_icon:!0,close:!1,handle:!0,handle_txt:"&nbsp;",html:"",width:"",height:"",mousepos:!1,position:"",padding:"5px",id:""},d;for(d in a)b[d]=a[d];b.mousepos&&(b.position="mouse");a=$('<img alt="close" style="float: right; cursor: pointer; margin: 1px 0px 0px 0px;" src="/int/img/close.gif"/>');d=$('<div class="handle" style="background-color: #EAEAEA; padding: 2px 4px 1px 4px; cursor: move; border-bottom: 1px solid #666666; font-size: 11px;">'+
b.handle_txt+"</div>");b.close_icon&&d.prepend(a);var c=$('<div style="padding: '+b.padding+'; position: relative;">'+b.html+"</div>"),e=$('<div class="wgwindow"></div>'),f=null;b.handle&&(e.append(d),f=".handle");e.append(c);$("body").append(e);e.drag("start",function(){$(this).appendTo(this.parentNode)}).drag(function(a,b){$(this).css({top:b.offsetY,left:b.offsetX})},{handle:f});b.close_icon&&a.click(function(){e.hide()});"content"==b.close&&(c.css("cursor","crosshair"),c.click(function(){e.hide()}));
""!=b.width&&c.width(b.width);""!=b.height&&c.height(b.height);""!=b.id&&e.attr("id",b.id);e.setContent=function(a){c.empty().append(a)};e.ajaxLoad=function(a,b){c.empty().load(a,b)};e.getContentDiv=function(){return c};e.close=function(){e.hide()};e.remove=function(){e.remove()};e.resetPos=function(a){a&&(b.position=a);"mouse"==b.position?WgUtil.setMousePos(e):"center"==b.position&&WgUtil.setCenterPos(e);WgUtil.fitBrowser(e)};e.stupidIe=function(){$.browser.msie&&9>parseFloat($.browser.version)&&
e.width(e.getContentDiv().width()+6)};e.stupidIe();e.resetPos();return e}},mouseTrack:function(){if(!this.mouse.eventset){var a=this.mouse;a.eventset=!0;$(document).mousemove(function(b){a.x=b.pageX;a.y=b.pageY})}},getMousePos:function(){return this.mouse},fitBrowser:function(a){if("undefined"!=typeof jQuery){a=$(a);var b={},d=$(window).scrollTop(),c=$(window).scrollLeft(),e=$(window).height(),f=$(window).width(),g=a.height(),h=a.width(),n=a.offset();b.top=n.top;b.left=n.left;b.top+g>d+e&&(b.top=
d+e-g-10);b.top<d&&(b.top=d+10);b.left+h>c+f&&(b.left=c+f-h-10);b.left<c&&(b.left=c+10);a.css(b)}},setMousePos:function(a){var b=WgUtil.getMousePos();b.eventset&&a.css("top",b.y).css("left",b.x)},setCenterPos:function(a){a.stupidIe();var b=$(window).height()/2-a.height()/2+$(window).scrollTop(),d=$(window).width()/2-a.width()/2+$(window).scrollLeft();a.css("top",b).css("left",d)},ibox:[],timer:[],timeron:!1,starttimer:function(a){this.timeron||(this.timer[a]=new Date,this.timer[a]=this.timer[a].getTime(),
this.timeron=!0)},stoptimer:function(a){if(this.timeron){var b;b=(new Date).getTime()-this.timer[a];3E4<b&&(b=3E4);1E3<b&&(this.ibox[a]+=b);this.iboxsave();this.timer[a]=0;this.timeron=!1}},iboxsave:function(){var a=new Date,b=Math.floor(a.getTime()/1E3);a.setTime(a.getTime()+12096E5);b+="/";for(i=0;i<this.ibox.length;i++)0<this.ibox[i]&&(b+=i+"_"+this.ibox[i]+";");b=b.substring(0,b.length-1);document.cookie="ibox="+escape(b)+"; path=/; expires="+a.toGMTString()},show:function(a){document.getElementById(a).style.display=
"block"},hide:function(a){document.getElementById(a).style.display="none"},toggle:function(a){a=document.getElementById(a);a.style.display="block"==a.style.display?"none":"block"},rangeArr_bak:function(a,b,d){b=b||1;d=d||1;var c=[];for(a=a||0;a<=b;a+=d)c.push(a);return c},rangeArr:function(a,b,d){d=d||1;var c=[];if(d.constructor!=Array){var e;d=[[b,d]]}if(b>a){c.push(a);for(var f=0;f<d.length;f++)for(var g=d[f][0];a<=g;){e=Math.abs(d[f][1]);if(a+e>g)break;a+=e;if(a>b)return c;c.push(a)}}else if(b<
a)for(c.push(a),f=0;f<d.length;f++)for(g=d[f][0];a>=g;){e=Math.abs(d[f][1]);if(a-e<g)break;a-=e;if(a<b)return c;c.push(a)}return c},updateObject:function(a,b){var d=this.deepCopy(b);if(a)for(var c in a)d[c]=a[c];return d},setProperties:function(a,b,d){b||(b={});for(var c in d)a[c]=void 0===b[c]?d[c]:b[c];return a},deepCopy:function(a,b){b=b||{};for(var d in a)null!=a[d]&&"object"===typeof a[d]?(b[d]=a[d].constructor===Array?[]:{},this.deepCopy(a[d],b[d])):b[d]=a[d];return b},deg2rad:function(a){return a*
Math.PI/180},distance:function(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))},distanceLatLon:function(a,b,d,c){b-=c;a=Math.sin(WgUtil.deg2rad(a))*Math.sin(WgUtil.deg2rad(d))+Math.cos(WgUtil.deg2rad(a))*Math.cos(WgUtil.deg2rad(d))*Math.cos(WgUtil.deg2rad(b));a=Math.acos(a);return 6378*a},inArray:function(a,b){return-1<b.indexOf(a)?!0:!1},arrayMax:function(a){for(var b=-Number.MIN_VALUE,d=0;d<a.length;d++)a[d]>b&&(b=a[d]);return b},arrayMin:function(a){for(var b=Number.MAX_VALUE,
d=0;d<a.length;d++)a[d]<b&&(b=a[d]);return b},arrayUnique:function(a){if(!a.length)return a;for(var b=[],d=0;d<a.length;d++)WgUtil.inArray(a[d],b)||(b[b.length]=a[d]);return b},googleMap:function(a,b){$.ajax({url:"/int/ajax/ajax_gmap_loadlog.php",dataType:"json",data:{url:window.location.href},cache:!1});return new google.maps.Map(document.getElementById(a),b)},round:function(a,b){if(!b)return Math.round(a);var d=Math.pow(10,b);return Math.round(a*d)/d},hlaska:function(a,b,d,c){c=WgUtil.updateObject(c,
{remove:0,css:"hlaska",css_error:"hlaska-err"});b=$('<div class="'+(d?c.css_error:c.css)+'" style="margin: 0px;">'+b+"</div>");$("#"+a).append(b);c.remove&&b.delay(c.remove).fadeOut({complete:function(){this.remove()}})},unitConvert:function(a,b,d){if(isNaN(a)||!b||""==b||b==d)return a;var c=a=parseFloat(a);if(d)switch(d){case "knots":c=a;break;case "ms":case "msd":c=a/.515277778;break;case "kmh":c=a/1.855;break;case "mph":c=a/1.152889994;break;case "bft":0<a&&(c=0);1<=a&&(c=.6);2<=a&&(c=3);3<=a&&
(c=7);4<=a&&(c=11);5<=a&&(c=16);6<=a&&(c=21);7<=a&&(c=27);8<=a&&(c=33);9<=a&&(c=40);10<=a&&(c=47);11<=a&&(c=55);12<=a&&(c=64);break;case "c":c=a;break;case "f":c=5*(a-32)/9;break;case "m":c=a;break;case "ft":c=a/3.28}a=c;switch(b){case "knots":c=a;break;case "ms":case "msd":c=.515277778*a;break;case "kmh":c=1.855*a;break;case "mph":c=1.152889994*a;break;case "bft":0<a&&(c=0);.6<=a&&(c=1);3<=a&&(c=2);7<=a&&(c=3);11<=a&&(c=4);16<=a&&(c=5);21<=a&&(c=6);27<=a&&(c=7);33<=a&&(c=8);40<=a&&(c=9);47<=a&&(c=
10);55<=a&&(c=11);64<=a&&(c=12);break;case "c":c=a;break;case "f":c=9*a/5+32;break;case "m":c=a;break;case "ft":c=3.28*a}return c},supportsSVG:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},isHttps:function(){return"https:"==window.location.protocol?!0:!1},html5Banner:function(a){var b="/reklama/bannery/html5/"+a.dir+"/index.html",d="wgifr-"+Math.random().toString(36).replace(/[^a-z0-9]+/g,"").substring(0,16);document.write("<iframe id="+
d+' style="margin:0;padding:0;border: none;width:'+a.w+"px;height:"+a.h+'px;background-color:white;" src="" width='+a.w+" height="+a.h+"></iframe>");$(function(){var a=$("#"+d),e=a.parent().data("bannid");a.attr("src",b);if(e){var f="http://"+window.location.hostname+"/int/click.php?bannid="+e;a.load(function(){$(this.contentDocument).find(".link_url,#link_url").each(function(){var a=$(this),b=a.attr("href");a.attr("href",f+"&url="+encodeURIComponent(b));a.attr("target","_top")})})}})}};
(function(a){function b(){this._settings=[];this._extensions=[];this.regional=[];this.regional[""]={errorLoadingText:"Error loading",notSupportedText:"This browser does not support SVG"};this.local=this.regional[""];this._uuid=(new Date).getTime();var a;try{a=!(!window.ActiveXObject||!new ActiveXObject("RenesisX.RenesisCtrl"))}catch(b){a=!1}this._renesis=a}function d(b,c){this._svg=b;this._container=c;for(var d=0;d<a.svg._extensions.length;d++){var e=a.svg._extensions[d];this[e[0]]=new e[1](this)}}
function c(){this._path=""}function e(){this._parts=[]}function f(a){return a&&a.constructor==Array}a.extend(b.prototype,{markerClassName:"hasSVG",svgNS:"http://www.w3.org/2000/svg",xlinkNS:"http://www.w3.org/1999/xlink",_wrapperClass:d,_attrNames:{class_:"class",in_:"in",alignmentBaseline:"alignment-baseline",baselineShift:"baseline-shift",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorRendering:"color-rendering",
dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",
imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",
strokeWidth:"stroke-width",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",underlinePosition:"underline-position",underlineThickness:"underline-thickness",vertAdvY:"vert-adv-y",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode"},_attachSVG:function(b,c){var d=b.namespaceURI==this.svgNS?b:null;b=d?null:b;if(!a(b||d).hasClass(this.markerClassName)){"string"==typeof c?c={loadURL:c}:"function"==typeof c&&(c={onLoad:c});a(b||d).addClass(this.markerClassName);
try{d||(d=document.createElementNS(this.svgNS,"svg"),d.setAttribute("version","1.1"),0<b.clientWidth&&d.setAttribute("width",b.clientWidth),0<b.clientHeight&&d.setAttribute("height",b.clientHeight),b.appendChild(d)),this._afterLoad(b,d,c||{})}catch(e){a.browser.msie?(b.id||(b.id="svg"+this._uuid++),this._settings[b.id]=c,b.innerHTML='<embed type="image/svg+xml" width="100%" height="100%" src="'+(c.initPath||"")+'blank.svg" pluginspage="http://www.adobe.com/svg/viewer/install/main.html"/>'):b.innerHTML=
'<p class="svg_error">'+this.local.notSupportedText+"</p>"}}},_registerSVG:function(){for(var b=0;b<document.embeds.length;b++){var c=document.embeds[b].parentNode;if(a(c).hasClass(a.svg.markerClassName)&&!a.data(c,"svgwrapper")){var d=null;try{d=document.embeds[b].getSVGDocument()}catch(e){setTimeout(a.svg._registerSVG,250);break}(d=d?d.documentElement:null)&&a.svg._afterLoad(c,d)}}},_afterLoad:function(b,c,d){d=d||this._settings[b.id];this._settings[b?b.id:""]=null;var e=new this._wrapperClass(c,
b);a.data(b||c,"svgwrapper",e);try{d.loadURL&&e.load(d.loadURL,d),d.settings&&e.configure(d.settings),d.onLoad&&!d.loadURL&&d.onLoad.apply(b||c,[e])}catch(f){alert(f)}},_getSVG:function(b){b="string"==typeof b?a(b)[0]:b.jquery?b[0]:b;return a.data(b,"svgwrapper")},_destroySVG:function(b){var c=a(b);c.hasClass(this.markerClassName)&&(c.removeClass(this.markerClassName),b.namespaceURI!=this.svgNS&&c.empty(),a.removeData(b,"svgwrapper"))},addExtension:function(a,b){this._extensions.push([a,b])},isSVGElem:function(b){return 1==
b.nodeType&&b.namespaceURI==a.svg.svgNS}});a.extend(d.prototype,{_width:function(){return this._container?this._container.clientWidth:this._svg.width},_height:function(){return this._container?this._container.clientHeight:this._svg.height},root:function(){return this._svg},configure:function(b,c,d){b.nodeName||(d=c,c=b,b=this._svg);if(d)for(d=b.attributes.length-1;0<=d;d--){var e=b.attributes.item(d);"onload"!=e.nodeName&&"version"!=e.nodeName&&"xmlns"!=e.nodeName.substring(0,5)&&b.attributes.removeNamedItem(e.nodeName)}for(var f in c)b.setAttribute(a.svg._attrNames[f]||
f,c[f]);return this},getElementById:function(a){return this._svg.ownerDocument.getElementById(a)},change:function(b,c){if(b)for(var d in c)null==c[d]?b.removeAttribute(a.svg._attrNames[d]||d):b.setAttribute(a.svg._attrNames[d]||d,c[d]);return this},_args:function(b,c,d){c.splice(0,0,"parent");c.splice(c.length,0,"settings");var e={},f=0;null!=b[0]&&b[0].jquery&&(b[0]=b[0][0]);null==b[0]||"object"==typeof b[0]&&b[0].nodeName||(e.parent=null,f=1);for(var l=0;l<b.length;l++)e[c[l+f]]=b[l];d&&a.each(d,
function(a,b){"object"==typeof e[b]&&(e.settings=e[b],e[b]=null)});return e},title:function(a,b,c){var d=this._args(arguments,["text"]),e=this._makeNode(d.parent,"title",d.settings||{});e.appendChild(this._svg.ownerDocument.createTextNode(d.text));return e},describe:function(a,b,c){var d=this._args(arguments,["text"]),e=this._makeNode(d.parent,"desc",d.settings||{});e.appendChild(this._svg.ownerDocument.createTextNode(d.text));return e},defs:function(b,c,d){var e=this._args(arguments,["id"],["id"]);
return this._makeNode(e.parent,"defs",a.extend(e.id?{id:e.id}:{},e.settings||{}))},symbol:function(b,c,d,e,f,l,r){var s=this._args(arguments,["id","x1","y1","width","height"]);return this._makeNode(s.parent,"symbol",a.extend({id:s.id,viewBox:s.x1+" "+s.y1+" "+s.width+" "+s.height},s.settings||{}))},marker:function(b,c,d,e,f,l,r,s){var t=this._args(arguments,"id refX refY mWidth mHeight orient".split(" "),["orient"]);return this._makeNode(t.parent,"marker",a.extend({id:t.id,refX:t.refX,refY:t.refY,
markerWidth:t.mWidth,markerHeight:t.mHeight,orient:t.orient||"auto"},t.settings||{}))},style:function(b,c,d){var e=this._args(arguments,["styles"]),f=this._makeNode(e.parent,"style",a.extend({type:"text/css"},e.settings||{}));f.appendChild(this._svg.ownerDocument.createTextNode(e.styles));a.browser.opera&&a("head").append('<style type="text/css">'+e.styles+"</style>");return f},script:function(b,c,d,e){var f=this._args(arguments,["script","type"],["type"]),l=this._makeNode(f.parent,"script",a.extend({type:f.type||
"text/javascript"},f.settings||{}));l.appendChild(this._svg.ownerDocument.createTextNode(f.script));a.browser.mozilla||a.globalEval(f.script);return l},linearGradient:function(b,c,d,e,f,l,r,s){var t=this._args(arguments,"id stops x1 y1 x2 y2".split(" "),["x1"]),p=a.extend({id:t.id},null!=t.x1?{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}:{});return this._gradient(t.parent,"linearGradient",a.extend(p,t.settings||{}),t.stops)},radialGradient:function(b,c,d,e,f,l,r,s,t){var p=this._args(arguments,"id stops cx cy r fx fy".split(" "),
["cx"]),C=a.extend({id:p.id},null!=p.cx?{cx:p.cx,cy:p.cy,r:p.r,fx:p.fx,fy:p.fy}:{});return this._gradient(p.parent,"radialGradient",a.extend(C,p.settings||{}),p.stops)},_gradient:function(b,c,d,e){b=this._makeNode(b,c,d);for(c=0;c<e.length;c++)d=e[c],this._makeNode(b,"stop",a.extend({offset:d[0],stopColor:d[1]},null!=d[2]?{stopOpacity:d[2]}:{}));return b},pattern:function(b,c,d,e,f,l,r,s,t,p,C){var x=this._args(arguments,"id x y width height vx vy vwidth vheight".split(" "),["vx"]),w=a.extend({id:x.id,
x:x.x,y:x.y,width:x.width,height:x.height},null!=x.vx?{viewBox:x.vx+" "+x.vy+" "+x.vwidth+" "+x.vheight}:{});return this._makeNode(x.parent,"pattern",a.extend(w,x.settings||{}))},clipPath:function(b,c,d,e){var f=this._args(arguments,["id","units"]);f.units=f.units||"userSpaceOnUse";return this._makeNode(f.parent,"clipPath",a.extend({id:f.id,clipPathUnits:f.units},f.settings||{}))},mask:function(b,c,d,e,f,l,r){var s=this._args(arguments,["id","x","y","width","height"]);return this._makeNode(s.parent,
"mask",a.extend({id:s.id,x:s.x,y:s.y,width:s.width,height:s.height},s.settings||{}))},createPath:function(){return new c},createText:function(){return new e},svg:function(b,c,d,e,f,l,r,s,t,p){var C=this._args(arguments,"x y width height vx vy vwidth vheight".split(" "),["vx"]),x=a.extend({x:C.x,y:C.y,width:C.width,height:C.height},null!=C.vx?{viewBox:C.vx+" "+C.vy+" "+C.vwidth+" "+C.vheight}:{});return this._makeNode(C.parent,"svg",a.extend(x,C.settings||{}))},group:function(b,c,d){var e=this._args(arguments,
["id"],["id"]);return this._makeNode(e.parent,"g",a.extend({id:e.id},e.settings||{}))},use:function(b,c,d,e,f,l,r){var s=this._args(arguments,["x","y","width","height","ref"]);"string"==typeof s.x&&(s.ref=s.x,s.settings=s.y,s.x=s.y=s.width=s.height=null);var t=this._makeNode(s.parent,"use",a.extend({x:s.x,y:s.y,width:s.width,height:s.height},s.settings||{}));t.setAttributeNS(a.svg.xlinkNS,"href",s.ref);return t},link:function(b,c,d){var e=this._args(arguments,["ref"]),f=this._makeNode(e.parent,"a",
e.settings);f.setAttributeNS(a.svg.xlinkNS,"href",e.ref);return f},image:function(b,c,d,e,f,l,r){var s=this._args(arguments,["x","y","width","height","ref"]),t=this._makeNode(s.parent,"image",a.extend({x:s.x,y:s.y,width:s.width,height:s.height},s.settings||{}));t.setAttributeNS(a.svg.xlinkNS,"href",s.ref);return t},path:function(b,c,d){var e=this._args(arguments,["path"]);return this._makeNode(e.parent,"path",a.extend({d:e.path.path?e.path.path():e.path},e.settings||{}))},rect:function(b,c,d,e,f,
l,r,s){var t=this._args(arguments,"x y width height rx ry".split(" "),["rx"]);return this._makeNode(t.parent,"rect",a.extend({x:t.x,y:t.y,width:t.width,height:t.height},t.rx?{rx:t.rx,ry:t.ry}:{},t.settings||{}))},circle:function(b,c,d,e,f){var l=this._args(arguments,["cx","cy","r"]);return this._makeNode(l.parent,"circle",a.extend({cx:l.cx,cy:l.cy,r:l.r},l.settings||{}))},ellipse:function(b,c,d,e,f,l){var r=this._args(arguments,["cx","cy","rx","ry"]);return this._makeNode(r.parent,"ellipse",a.extend({cx:r.cx,
cy:r.cy,rx:r.rx,ry:r.ry},r.settings||{}))},line:function(b,c,d,e,f,l){var r=this._args(arguments,["x1","y1","x2","y2"]);return this._makeNode(r.parent,"line",a.extend({x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},r.settings||{}))},polyline:function(a,b,c){var d=this._args(arguments,["points"]);return this._poly(d.parent,"polyline",d.points,d.settings)},polygon:function(a,b,c){var d=this._args(arguments,["points"]);return this._poly(d.parent,"polygon",d.points,d.settings)},_poly:function(b,c,d,e){for(var f="",
l=0;l<d.length;l++)f+=d[l].join()+" ";return this._makeNode(b,c,a.extend({points:a.trim(f)},e||{}))},text:function(b,c,d,e,m){var l=this._args(arguments,["x","y","value"]);"string"==typeof l.x&&4>arguments.length&&(l.value=l.x,l.settings=l.y,l.x=l.y=null);return this._text(l.parent,"text",l.value,a.extend({x:l.x&&f(l.x)?l.x.join(" "):l.x,y:l.y&&f(l.y)?l.y.join(" "):l.y},l.settings||{}))},textpath:function(b,c,d,e){var f=this._args(arguments,["path","value"]),l=this._text(f.parent,"textPath",f.value,
f.settings||{});l.setAttributeNS(a.svg.xlinkNS,"href",f.path);return l},_text:function(b,c,d,e){b=this._makeNode(b,c,e);if("string"==typeof d)b.appendChild(b.ownerDocument.createTextNode(d));else for(c=0;c<d._parts.length;c++)if(e=d._parts[c],"tspan"==e[0]){var f=this._makeNode(b,e[0],e[2]);f.appendChild(b.ownerDocument.createTextNode(e[1]));b.appendChild(f)}else"tref"==e[0]?(f=this._makeNode(b,e[0],e[2]),f.setAttributeNS(a.svg.xlinkNS,"href",e[1]),b.appendChild(f)):"textpath"==e[0]?(f=a.extend({},
e[2]),f.href=null,f=this._makeNode(b,e[0],f),f.setAttributeNS(a.svg.xlinkNS,"href",e[2].href),f.appendChild(b.ownerDocument.createTextNode(e[1])),b.appendChild(f)):b.appendChild(b.ownerDocument.createTextNode(e[1]));return b},other:function(a,b,c){var d=this._args(arguments,["name"]);return this._makeNode(d.parent,d.name,d.settings||{})},_makeNode:function(b,c,d){b=b||this._svg;var e=this._svg.ownerDocument.createElementNS(a.svg.svgNS,c);for(c in d){var f=d[c];null==f||null==f||"string"==typeof f&&
""==f||e.setAttribute(a.svg._attrNames[c]||c,f)}b.appendChild(e);return e},add:function(b,c){var d=this._args(1==arguments.length?[null,b]:arguments,["node"]),e=this;d.parent=d.parent||this._svg;d.node=d.node.jquery?d.node:a(d.node);try{if(a.svg._renesis)throw"Force traversal";d.parent.appendChild(d.node.cloneNode(!0))}catch(f){d.node.each(function(){var a=e._cloneAsSVG(this);a&&d.parent.appendChild(a)})}return this},clone:function(b,c){var d=this,e=this._args(1==arguments.length?[null,b]:arguments,
["node"]);e.parent=e.parent||this._svg;e.node=e.node.jquery?e.node:a(e.node);var f=[];e.node.each(function(){var a=d._cloneAsSVG(this);a&&(a.id="",e.parent.appendChild(a),f.push(a))});return f},_cloneAsSVG:function(b){var c=null;if(1==b.nodeType){for(var c=this._svg.ownerDocument.createElementNS(a.svg.svgNS,this._checkName(b.nodeName)),d=0;d<b.attributes.length;d++){var e=b.attributes.item(d);"xmlns"!=e.nodeName&&e.nodeValue&&("xlink"==e.prefix?c.setAttributeNS(a.svg.xlinkNS,e.localName||e.baseName,
e.nodeValue):c.setAttribute(this._checkName(e.nodeName),e.nodeValue))}for(d=0;d<b.childNodes.length;d++)(e=this._cloneAsSVG(b.childNodes[d]))&&c.appendChild(e)}else if(3==b.nodeType)a.trim(b.nodeValue)&&(c=this._svg.ownerDocument.createTextNode(b.nodeValue));else if(4==b.nodeType&&a.trim(b.nodeValue))try{c=this._svg.ownerDocument.createCDATASection(b.nodeValue)}catch(f){c=this._svg.ownerDocument.createTextNode(b.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))}return c},
_checkName:function(a){a="A"<=a.substring(0,1)&&"Z">=a.substring(0,1)?a.toLowerCase():a;return"svg:"==a.substring(0,4)?a.substring(4):a},load:function(b,c){c="boolean"==typeof c?{addTo:c}:"function"==typeof c?{onLoad:c}:"string"==typeof c?{parent:c}:"object"==typeof c&&c.nodeName?{parent:c}:"object"==typeof c&&c.jquery?{parent:c}:c||{};c.parent||c.addTo||this.clear(!1);var d=[this._svg.getAttribute("width"),this._svg.getAttribute("height")],e=this,f=function(b){b=a.svg.local.errorLoadingText+": "+
b;c.onLoad?c.onLoad.apply(e._container||e._svg,[e,b]):e.text(null,10,20,b)},l=function(a){var b=new ActiveXObject("Microsoft.XMLDOM");b.validateOnParse=!1;b.resolveExternals=!1;b.async=!1;b.loadXML(a);return 0!=b.parseError.errorCode?(f(b.parseError.reason),null):b},r=function(b){if(b)if("svg"!=b.documentElement.nodeName){var g=b.getElementsByTagName("parsererror"),l=g.length?g[0].getElementsByTagName("div"):[];f(g.length?(l.length?l[0]:g[0]).firstChild.nodeValue:"???")}else{for(var g=c.parent?a(c.parent)[0]:
e._svg,r={},l=0;l<b.documentElement.attributes.length;l++){var x=b.documentElement.attributes.item(l);"version"!=x.nodeName&&"xmlns"!=x.nodeName.substring(0,5)&&(r[x.nodeName]=x.nodeValue)}e.configure(g,r,!c.parent);b=b.documentElement.childNodes;for(l=0;l<b.length;l++)try{if(a.svg._renesis)throw"Force traversal";g.appendChild(e._svg.ownerDocument.importNode(b[l],!0));"script"==b[l].nodeName&&a.globalEval(b[l].textContent)}catch(w){e.add(g,b[l])}c.changeSize||e.configure(g,{width:d[0],height:d[1]});
c.onLoad&&c.onLoad.apply(e._container||e._svg,[e])}};b.match("<svg")?r(a.browser.msie?l(b):(new DOMParser).parseFromString(b,"text/xml")):a.ajax({url:b,dataType:a.browser.msie?"text":"xml",success:function(b){r(a.browser.msie?l(b):b)},error:function(a,b,c){f(b+(c?" "+c.message:""))}});return this},remove:function(a){a=a.jquery?a[0]:a;a.parentNode.removeChild(a);return this},clear:function(a){for(a&&this.configure({},!0);this._svg.firstChild;)this._svg.removeChild(this._svg.firstChild);return this},
toSVG:function(a){a=a||this._svg;return"undefined"==typeof XMLSerializer?this._toSVG(a):(new XMLSerializer).serializeToString(a)},_toSVG:function(b){var c="";if(!b)return c;if(3==b.nodeType)c=b.nodeValue;else if(4==b.nodeType)c="<![CDATA["+b.nodeValue+"]]\x3e";else{c="<"+b.nodeName;if(b.attributes)for(var d=0;d<b.attributes.length;d++){var e=b.attributes.item(d);""==a.trim(e.nodeValue)||e.nodeValue.match(/^\[object/)||e.nodeValue.match(/^function/)||(c+=" "+(e.namespaceURI==a.svg.xlinkNS?"xlink:":
"")+e.nodeName+'="'+e.nodeValue+'"')}if(b.firstChild){c+=">";for(d=b.firstChild;d;)c+=this._toSVG(d),d=d.nextSibling;c+="</"+b.nodeName+">"}else c+="/>"}return c}});a.extend(c.prototype,{reset:function(){this._path="";return this},move:function(a,b,c){c=f(a)?b:c;return this._coords(c?"m":"M",a,b)},line:function(a,b,c){c=f(a)?b:c;return this._coords(c?"l":"L",a,b)},horiz:function(a,b){this._path+=(b?"h":"H")+(f(a)?a.join(" "):a);return this},vert:function(a,b){this._path+=(b?"v":"V")+(f(a)?a.join(" "):
a);return this},curveC:function(a,b,c,d,e,l,r){r=f(a)?b:r;return this._coords(r?"c":"C",a,b,c,d,e,l)},smoothC:function(a,b,c,d,e){e=f(a)?b:e;return this._coords(e?"s":"S",a,b,c,d)},curveQ:function(a,b,c,d,e){e=f(a)?b:e;return this._coords(e?"q":"Q",a,b,c,d)},smoothQ:function(a,b,c){c=f(a)?b:c;return this._coords(c?"t":"T",a,b)},_coords:function(a,b,c,d,e,l,r){if(f(b))for(c=0;c<b.length;c++)d=b[c],this._path+=(0==c?a:" ")+d[0]+","+d[1]+(4>d.length?"":" "+d[2]+","+d[3]+(6>d.length?"":" "+d[4]+","+d[5]));
else this._path+=a+b+","+c+(null==d?"":" "+d+","+e+(null==l?"":" "+l+","+r));return this},arc:function(a,b,c,d,e,l,r,s){s=f(a)?b:s;this._path+=s?"a":"A";if(f(a))for(b=0;b<a.length;b++)c=a[b],this._path+=(0==b?"":" ")+c[0]+","+c[1]+" "+c[2]+" "+(c[3]?"1":"0")+","+(c[4]?"1":"0")+" "+c[5]+","+c[6];else this._path+=a+","+b+" "+c+" "+(d?"1":"0")+","+(e?"1":"0")+" "+l+","+r;return this},close:function(){this._path+="z";return this},path:function(){return this._path}});c.prototype.moveTo=c.prototype.move;
c.prototype.lineTo=c.prototype.line;c.prototype.horizTo=c.prototype.horiz;c.prototype.vertTo=c.prototype.vert;c.prototype.curveCTo=c.prototype.curveC;c.prototype.smoothCTo=c.prototype.smoothC;c.prototype.curveQTo=c.prototype.curveQ;c.prototype.smoothQTo=c.prototype.smoothQ;c.prototype.arcTo=c.prototype.arc;a.extend(e.prototype,{reset:function(){this._parts=[];return this},string:function(a){this._parts[this._parts.length]=["text",a];return this},span:function(a,b){this._parts[this._parts.length]=
["tspan",a,b];return this},ref:function(a,b){this._parts[this._parts.length]=["tref",a,b];return this},path:function(b,c,d){this._parts[this._parts.length]=["textpath",c,a.extend({href:b},d||{})];return this}});a.fn.svg=function(b){var c=Array.prototype.slice.call(arguments,1);return"string"==typeof b&&"get"==b?a.svg["_"+b+"SVG"].apply(a.svg,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.svg["_"+b+"SVG"].apply(a.svg,[this].concat(c)):a.svg._attachSVG(this,b||{})})};a.svg=new b})(jQuery);
(function(a){function b(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d<f}function d(a){for(var b=a.head;b;){var c=b.next;b.next=b.prev;b=b.prev=c}c=a.head;a.head=a.tail;a.tail=c}function c(a){this.level=a;this.s=null;this.count=0}function e(a){if(a)this.drawContour=a;else{var b=this;b.contours={};this.drawContour=function(a,d,e,f,g,s){var t=b.contours[s];t||(t=b.contours[s]=new c(g));t.addSegment({x:a,y:d},{x:e,y:f})};this.contourList=function(){var a=[],c=b.contours,d;for(d in c)for(var e=c[d].s,f=
c[d].level;e;){var s=e.head,g=[];g.level=f;for(g.k=d;s&&s.p;)g.push(s.p),s=s.next;a.push(g);e=e.next}a.sort(function(a,b){return a.k-b.k});return a}}this.h=Array(5);this.sh=Array(5);this.xh=Array(5);this.yh=Array(5)}a.Conrec=e;var f=Number.MIN_VALUE;c.prototype.remove_seq=function(a){a.prev?a.prev.next=a.next:this.s=a.next;a.next&&(a.next.prev=a.prev);--this.count};c.prototype.addSegment=function(a,c){for(var e=this.s,f=null,m=null,l=!1,r=!1;e&&(null==f&&(b(a,e.head.p)?(f=e,l=!0):b(a,e.tail.p)&&(f=
e)),null==m&&(b(c,e.head.p)?(m=e,r=!0):b(c,e.tail.p)&&(m=e)),null==m||null==f);)e=e.next;switch((null!=f?1:0)|(null!=m?2:0)){case 0:f={p:a,prev:null};m={p:c,next:null};f.next=m;m.prev=f;f={head:f,tail:m,next:this.s,prev:null,closed:!1};this.s&&(this.s.prev=f);this.s=f;++this.count;break;case 1:e={p:c};l?(e.next=f.head,e.prev=null,f.head.prev=e,f.head=e):(e.next=null,e.prev=f.tail,f.tail.next=e,f.tail=e);break;case 2:e={p:a};r?(e.next=m.head,e.prev=null,m.head.prev=e,m.head=e):(e.next=null,e.prev=
m.tail,m.tail.next=e,m.tail=e);break;case 3:if(f===m){e={p:f.tail.p,next:f.head,prev:null};f.head.prev=e;f.head=e;f.closed=!0;break}switch((l?1:0)|(r?2:0)){case 0:d(f);case 1:m.tail.next=f.head;f.head.prev=m.tail;m.tail=f.tail;this.remove_seq(f);break;case 3:d(f);case 2:f.tail.next=m.head,m.head.prev=f.tail,f.tail=m.tail,this.remove_seq(m)}}};e.prototype.contour=function(a,b,c,d,e,f,r,s,t){var p=this.h,C=this.sh,x=this.xh,w=this.yh,S=this.drawContour;this.contours={};for(var D=function(a,b){return(p[b]*
x[a]-p[a]*x[b])/(p[b]-p[a])},y=function(a,b){return(p[b]*w[a]-p[a]*w[b])/(p[b]-p[a])},z,B,R,aa,M=0,F=0,Q=0,N=0,ba=[0,1,1,0],ha=[0,0,1,1],ia=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],O=e-1;O>=d;O--)for(var L=b;L<=c-1;L++)if(z=Math.min(a[L][O],a[L][O+1]),B=Math.min(a[L+1][O],a[L+1][O+1]),e=Math.min(z,B),z=Math.max(a[L][O],a[L][O+1]),B=Math.max(a[L+1][O],a[L+1][O+1]),aa=Math.max(z,B),aa>=t[0]&&e<=t[s-1])for(var T=0;T<s;T++)if(t[T]>=e&&t[T]<=aa){for(var H=4;0<=H;H--)0<
H?(p[H]=a[L+ba[H-1]][O+ha[H-1]]-t[T],x[H]=f[L+ba[H-1]],w[H]=r[O+ha[H-1]]):(p[0]=.25*(p[1]+p[2]+p[3]+p[4]),x[0]=.5*(f[L]+f[L+1]),w[0]=.5*(r[O]+r[O+1])),C[H]=0<p[H]?1:0>p[H]?-1:0;for(H=1;4>=H;H++)if(z=H,B=4!=H?H+1:1,R=ia[C[z]+1][C[0]+1][C[B]+1],0!=R){switch(R){case 1:M=x[z];Q=w[z];F=x[0];N=w[0];break;case 2:M=x[0];Q=w[0];F=x[B];N=w[B];break;case 3:M=x[B];Q=w[B];F=x[z];N=w[z];break;case 4:M=x[z];Q=w[z];F=D(0,B);N=y(0,B);break;case 5:M=x[0];Q=w[0];F=D(B,z);N=y(B,z);break;case 6:M=x[B];Q=w[B];F=D(z,0);
N=y(z,0);break;case 7:M=D(z,0);Q=y(z,0);F=D(0,B);N=y(0,B);break;case 8:M=D(0,B);Q=y(0,B);F=D(B,z);N=y(B,z);break;case 9:M=D(B,z),Q=y(B,z),F=D(z,0),N=y(z,0)}S(M,Q,F,N,t[T],T)}}}})("undefined"!==typeof exports?exports:window);var $class=function(a){var b=a.hasOwnProperty("constructor")?a.constructor:function(){},d;for(d in $class.Initializers)$class.Initializers[d].call(b,a[d],a);return b};
$class.Initializers={Extends:function(a){if(a){var b=function(){};this._superClass=b.prototype=a.prototype;this.prototype=new b}},Mixins:function(a,b){this.mixin=function(a){for(var b in a)b in $class.Initializers||(this.prototype[b]=a[b]);this.prototype.constructor=this};for(var d=[b].concat(a||[]),c=0,e=d.length;c<e;c++)this.mixin(d[c])}};var WgSvg={};
WgSvg.Canvas=$class({constructor:function(a){a=a instanceof jQuery?a:$("#"+a);this.svg=a.svg("get");this.width=a.width();this.height=a.height()},extend:function(a,b,d,c){}});
WgSvg.Graph=$class({constructor:function(a,b,d){this.canvas=a;this.svg=this.canvas.svg;this.x={range:[],dif:[]};this.y={range:[],dif:[]};this.setRange([0,100],[0,100]);this.invert=!1;this.min=-9999999999;this.max=9999999999;this.ignore_keys={};this.points=[];this.points_keys=[];this.okpoints=[];b||(b={});this.position=b.position?b.position:b.px_position?[b.px_position[0]/a.width,b.px_position[1]/a.height]:[0,0];this.dimensions=b.dimensions?b.dimensions:b.px_dimensions?[b.px_dimensions[0]/a.width,
b.px_dimensions[1]/a.height]:[1,1];this.px_padding=b.px_padding?b.px_padding:b.padding?b.px_padding:[b.padding[0]/a.height,b.padding[1]/a.width,b.padding[2]/a.height,b.padding[3]/a.width];this.pxpos=[this.position[0]*this.canvas.width+this.px_padding[3],this.position[1]*this.canvas.height+this.px_padding[2]];this.pxwidth=this.dimensions[0]*this.canvas.width-this.px_padding[3]-this.px_padding[1];this.pxheight=this.dimensions[1]*this.canvas.height-this.px_padding[0]-this.px_padding[2];d=d||{opacity:1};
d.transform="translate("+this.pxpos[0]+" "+(this.canvas.height-this.pxheight-this.pxpos[1])+")";b.clip&&(a="clp_"+Math.random().toString(36).substr(2,16),this.group_clp=this.svg.clipPath(a),this.svg.rect(this.group_clp,0,0,this.pxwidth,this.pxheight,0,0,{}),d["clip-path"]="url(#"+a+")");this.group=this.svg.group(d)},GPoint:function(a,b,d,c,e,f){this.point=[a,b];this.x=a;this.y=b;this.xval=d;this.val=c;this.print_val=e;this.data_index=f},GPointGroup:function(a){this.gpoints=a;var b=this;this.getPoints=
function(){for(var a=[],c=0;c<b.gpoints.length;c++)a[a.length]=b.gpoints[c].point;return a};this.getFirst=function(){return b.gpoints[0]};this.getLast=function(){return b.gpoints[b.gpoints.length-1]}},svgArrow:function(){this.svgarrow||(this.svgarrow=this.svg.createPath(),this.svgarrow.move(-5,-50).line([[5,-50],[5,10],[30,0],[0,50],[-30,0],[-5,10]]).close());return this.svgarrow},svgArrowS:function(){this.svgarrows||(this.svgarrows=this.svg.createPath(),this.svgarrows.move(0,-5).line(0,5).move(3,
1).line([[0,5],[-3,1]]));return this.svgarrows},getXY:function(a,b,d){var c=0;0<(d||0)%2&&(c=.5);a=Math.round((a-this.x.range[0])/this.x.dif*this.pxwidth)+c;b=this.invert?Math.round(0+(b-this.y.range[0])/this.y.dif*this.pxheight)+c:Math.round(this.pxheight-(b-this.y.range[0])/this.y.dif*this.pxheight)+c;isNaN(a)&&(a=0);isNaN(b)&&(b=0);return[a,b]},getGPointXY:function(a,b,d,c){d=this.getXY(a,b,d);return new this.GPoint(d[0],d[1],a,b,b,c)},setInvert:function(a){this.invert=a?!0:!1},setRange:function(a,
b){this.setXRange(a[0],a[1]);this.setYRange(b[0],b[1])},setXRange:function(a,b){this.x.range=[a,b];this.x.dif=b-a},setYRange:function(a,b){this.y.range=[a,b];this.y.dif=b-a},setFloatingYRange:function(a,b,d,c,e,f){f=(e=e||0)||0;if(d-c>a)f=c-f,a=d+e;else{var g=(d+c)/2;d<b+a/2&&c>b-a/2?(f=b-a/2-f,a=b+a/2+e):g>b?(f=d-a-f,a=d+e):(f=c-f,a=c+a+e)}this.setYRange(f,a)},setLimits:function(a,b){this.min=a;this.max=b},setIgnore:function(a){this.ignore_keys[a]=!0},resetIgnore:function(){this.ignore_keys=[]},
resetPoints:function(){this.points=[];this.points_keys=[];this.okpoints=[]},setXVals:function(a){this.xvals=a},linearGradientV:function(a,b){for(var d=[],c,e=b.colors,f=this.getXY(0,e[0][0]),g=this.getXY(0,e[e.length-1][0]),h=0;h<e.length;h++)c=parseFloat(e[h][0]),this.getXY(0,c),d[h]=[(c-e[0][0])/(e[e.length-1][0]-e[0][0]),b.getRGB(e[h][0])+"",1];c=this.svg.defs();return this.svg.linearGradient(c,a,d,f[0],f[1],g[0],g[1],{gradientUnits:"userSpaceOnUse"})},linearGradientHD:function(a,b,d){for(var c=
[],e,f=this.getXY(this.xvals[0],0),g=this.getXY(this.xvals[this.xvals.length-1],0),h=0;h<this.xvals.length;h++)e=parseFloat(a[h]),c[h]=[(this.xvals[h]-this.xvals[0])/(this.xvals[this.xvals.length-1]-this.xvals[0]),d.getRGB(e)+"",1];a=this.svg.defs();return this.svg.linearGradient(a,b,c,f[0],f[1],g[0],g[1],{gradientUnits:"userSpaceOnUse"})},bezierCtrlPoints:function(a,b,d,c,e,f,g,h,n){var v=(a+d)/2,m=(b+c)/2,l=(d+e)/2,r=(c+f)/2,s=(e+g)/2,t=(f+h)/2;b=Math.sqrt((d-a)*(d-a)+(c-b)*(c-b));a=Math.sqrt((e-
d)*(e-d)+(f-c)*(f-c));h=Math.sqrt((g-e)*(g-e)+(h-f)*(h-f));g=b/(b+a);h=a/(a+h);v+=(l-v)*g;m+=(r-m)*g;s=l+(s-l)*h;t=r+(t-r)*h;v=v+(l-v)*n+d-v;m=m+(r-m)*n+c-m;l=s+(l-s)*n+e-s;n=t+(r-t)*n+f-t;isNaN(v)&&(v=d);isNaN(m)&&(m=c);isNaN(l)&&(l=e);isNaN(n)&&(n=f);return[[v,m],[l,n]]},getGPoints:function(a,b){this.resetPoints();var d=[],c;b=b||{strokeWidth:1};for(var e=0;e<this.xvals.length;e++){c=!1;if(a[e]<this.min||a[e]>this.max||this.ignore_keys[e])c=!0;c||a[e]!=parseFloat(a[e])||(d[d.length]=this.getGPointXY(this.xvals[e],
a[e],b.strokeWidth,e))}return d},getGPointGroups:function(a,b,d){this.resetPoints();d=WgUtil.updateObject(d,{max_x_diff:"auto",max_x_diff_n:5});a=this.getGPoints(a,b);b=[];var c=!1;"auto"==d.max_x_diff?c=this._minXDiff()*d.max_x_diff_n:!1!==d.max_x_diff&&(c=d.max_x_diff);if(!1===c||1>=a.length)return[a];b=[];d=[a[0]];for(var e=1;e<a.length;e++)a[e].xval-a[e-1].xval>c&&(b[b.length]=new this.GPointGroup(d),d=[a[e]]),d[d.length]=a[e];b[b.length]=new this.GPointGroup(d);return b},getCtrlPoints:function(a,
b){for(var d=a.length,c=[],e,f=1;f<d-2;f++)e=this.bezierCtrlPoints(a[f-1][0],a[f-1][1],a[f][0],a[f][1],a[f+1][0],a[f+1][1],a[f+2][0],a[f+2][1],b),c[f+"_"+(f+1)]=e[0],c[f+1+"_"+f]=e[1];return c},_lineSimple:function(a,b,d){a=this.getGPointGroups(a,b,d);for(d=0;d<a.length;d++){var c=a[d].getPoints();this.svg.polyline(this.group,c,b)}},makePath:function(a,b,d,c){d=this.svg.createPath();var e;if(2>a.length)return d;0<b&&(e=this.getCtrlPoints(a,b));d.move(a[0][0],a[0][1]).line(a[1][0],a[1][1]);if(e)for(b=
1;b<a.length-2;b++)d.curveC(e[b+"_"+(b+1)][0],e[b+"_"+(b+1)][1],e[b+1+"_"+b][0],e[b+1+"_"+b][1],a[b+1][0],a[b+1][1]);else for(b=1;b<a.length-2;b++)d.line(a[b+1][0],a[b+1][1]);d.line(a[a.length-1][0],a[a.length-1][1]);c&&d.close();return d},_minXDiff:function(){var a;if(1>=this.xvals.length)return!1;a=this.xvals[1]-this.xvals[0];for(var b=2;b<this.xvals.length;b++)this.xvals[b]-this.xvals[b-1]<a&&(a=this.xvals[b]-this.xvals[b-1]);return a},makePathsFromData:function(a,b,d,c){c=WgUtil.updateObject(c,
{max_x_diff:"auto",max_x_diff_n:5});var e=[];a=this.getGPointGroups(a,d,c);for(c=0;c<a.length;c++){var f=a[c].getPoints();e[e.length]=this.makePath(f,b,d)}return e},line:function(a,b,d,c){d=WgUtil.updateObject(d,{fill:"none",stroke:"black",strokeWidth:1});b=b||0;if(0==b)this._lineSimple(a,d,c);else for(a=this.makePathsFromData(a,b,d,c),b=0;b<a.length;b++)this.svg.path(this.group,a[b],d)},_areaSimple:function(a,b,d){a=this.getGPointGroups(a,b,d);d=this.getXY(this.x.range[0],this.y.range[0],b.strokeWidth);
for(var c=0;c<a.length;c++){var e=a[c].getPoints();e[e.length]=[e[e.length-1][0],d[1]];e[e.length]=[e[0][0],d[1]];this.svg.polyline(this.group,e,b)}},area:function(a,b,d,c){d=WgUtil.updateObject(d,{fill:"#aaaaaa",stroke:"#aaaaaa",strokeWidth:1});b=b||0;if(0==b)this._areaSimple(a,d,c);else{a=this.getGPointGroups(a,d,c);c=this.getGPointXY(this.x.range[0],this.y.range[0],d.strokeWidth);for(var e=0;e<a.length;e++){var f=a[e].getPoints(),g=a[e].getLast(),h=a[e].getFirst(),f=this.makePath(f,b,d);f.line(g.x,
c.y);f.line(h.x,c.y);f.line(h.x,h.y);this.svg.path(this.group,f,d)}}},gridLineH:function(a,b){b=WgUtil.updateObject(b,{fill:"none",stroke:"black",strokeWidth:.5,opacity:.2});var d=this.getXY(this.x.range[0],a,b.strokeWidth),c=this.getXY(this.x.range[1],a,b.strokeWidth);this.svg.line(this.group,d[0],d[1],c[0],c[1],b)},gridLinesH:function(a,b){b=WgUtil.updateObject(b,{fill:"none",stroke:"black",strokeWidth:.5,opacity:.2});for(var d=0;d<a.length;d++)a[d]>this.y.range[1]||a[d]<this.y.range[0]||this.gridLineH(a[d],
b)},gridLineV:function(a,b){b=WgUtil.updateObject(b,{fill:"none",stroke:"black",strokeWidth:.5,opacity:.2,"stroke-dasharray":"2,2"});var d=this.getXY(a,this.y.range[0],b.strokeWidth),c=this.getXY(a,this.y.range[1],b.strokeWidth);this.svg.line(this.group,d[0],d[1],c[0],c[1],b)},gridRect:function(a,b,d,c,e){d=WgUtil.updateObject(d,{fill:"grey",stroke:"none",strokeWidth:0,opacity:.2});c=c||this.y.range[0];e=e||this.y.range[1];a=this.getXY(a,c,d.strokeWidth);b=this.getXY(b,e,d.strokeWidth);b[0]<a[0]||
a[1]<b[1]||this.svg.rect(this.group,a[0],b[1],b[0]-a[0],a[1]-b[1],0,0,d)},gridRects:function(a,b){b=WgUtil.updateObject(b,{fill:"grey",stroke:"none",strokeWidth:0});for(var d=0;d<a.length;d++)this.gridRect(a[d][0],a[d][1],b)},gridLinesV:function(a,b){b=WgUtil.updateObject(b,{fill:"none",stroke:"black",strokeWidth:.5,opacity:.2,"stroke-dasharray":"2,2"});for(var d=0;d<a.length;d++)a[d]>this.x.range[1]||a[d]<this.x.range[0]||this.gridLineV(a[d],b)},texts:function(a,b,d){d=WgUtil.updateObject(d,{"font-size":"10px",
opacity:1,"text-anchor":"middle"});b=WgUtil.updateObject(b,{ypos:this.y.range[1],skip:0,offset_v:2,offset_h:0});for(var c,e=0;e<a.length;e++)c=this.getXY(this.xvals[e],b.ypos,d.strokeWidth),this.svg.text(this.group,c[0]+b.offset_h,c[1]-b.offset_v,a[e],d)},text:function(a,b,d,c,e){e=WgUtil.updateObject(e,{"font-size":"10px",opacity:1,"text-anchor":"middle"});c=WgUtil.updateObject(c,{ypos:this.y.range[1],skip:0,offset_v:2,offset_h:0});a=this.getXY(a,b,e.strokeWidth);this.svg.text(this.group,a[0]+c.offset_h,
a[1]-c.offset_v,d,e)},grid:function(a,b,d,c){c=WgUtil.updateObject(c,{fill:"none",stroke:"black",strokeWidth:.5,opacity:.08});d=WgUtil.updateObject(d,{fill:"none",stroke:"black",strokeWidth:.5,opacity:.2});if("undefined"!==typeof b)for(var e=this.y.range[0];e<=this.y.range[1];e+=b)e!=this.y.range[0]&&this.gridLineH(e,c);for(e=this.y.range[0];e<=this.y.range[1];e+=a)e!=this.y.range[0]&&this.gridLineH(e,d)},legend:function(a,b,d,c,e,f,g){a=WgUtil.updateObject(a,{fill:"none",stroke:"black",strokeWidth:1,
opacity:.2});b=WgUtil.updateObject(b,{width:20,left:4,line_width:25,line_left:4,text_left:26,text_offset:3,desc_left:26});d=d||[];c=c||[];e=WgUtil.updateObject(e,{"font-size":"10px",opacity:1,"text-anchor":"start"});f=f||"";g=WgUtil.updateObject(g,{"font-size":"10px",opacity:1,"text-anchor":"middle"});var h=this.getXY(this.x.range[1],this.y.range[1],a.strokeWidth),n=this.getXY(0,this.y.range[0],a.strokeWidth),n=Math.abs(n[1]-h[1]);this.svg.rect(this.group,h[0]+b.left,h[1],b.width,n,0,0,a);for(n=0;n<
d.length;n++)d[n]>this.y.range[1]||d[n]<this.y.range[0]||(h=this.getXY(this.x.range[1],d[n],a.strokeWidth),this.svg.line(this.group,h[0]+b.line_left,h[1],h[0]+b.line_left+b.line_width,h[1],a),c[n]&&this.svg.text(this.group,h[0]+b.text_left,h[1]-b.text_offset,""+c[n],e));""!=f&&(a=this.getXY(this.x.range[1],this.y.range[0]+(this.y.range[1]-this.y.range[0])/2,a.strokeWidth),b=this.svg.group(this.group,{transform:"translate("+(a[0]+b.desc_left)+","+a[1]+") rotate(-90)"}),this.svg.text(b,0,0,f,g))},circles:function(a,
b,d,c){d=WgUtil.updateObject(d,{fill:"black",stroke:"none",strokeWidth:0});b=b||2;a=this.getGPoints(a,d);for(var e=0;e<a.length;e++)c&&(d.fill=c.getRGB(a[e].val)),this.svg.circle(this.group,a[e].x,a[e].y,b,d)},rects:function(a,b,d,c,e,f){c=WgUtil.updateObject(c,{fill:"black",stroke:"none",strokeWidth:0});f=WgUtil.updateObject(f,{fixed_v:!1});a=this.getGPoints(a,c);for(var g=0;g<a.length;g++)e&&(c.fill=e.getRGB(a[g].val)),!1!==f.fixed_v?this.svg.rect(this.group,a[g].x-b/2,f.fixed_v,b,d,0,0,c):this.svg.rect(this.group,
a[g].x-b/2,a[g].y-d/2,b,d,0,0,c)},bar:function(a,b,d,c){d=WgUtil.updateObject(d,{fill:"#aaaaaa",stroke:"none",strokeWidth:0});b=b||.2;var e=0;0<d.strokeWidth%2&&(e=.5);a=this.getGPoints(a,d);var f;b=this.pxwidth/this.xvals.length*(1-b)-d.strokeWidth;for(var g,h,n=Math.round(b),v=0;v<a.length;v++)f=this.getXY(0,0,d.strokeWidth),g=Math.round(a[v].x-b/2)+e,h=a[v].y,f=Math.abs(f[1]-h),this.invert&&(h-=f),c&&(d.fill=c.getRGB(a[v].val)),this.svg.rect(this.group,g,h,n,f,0,0,d)},numbers:function(a,b,d){d=
WgUtil.updateObject(d,{"font-size":"9px",opacity:1,"text-anchor":"middle"});b=WgUtil.updateObject(b,{offset_v:2,offset_h:0,skip:0,skip_start:0,round:0,margin_h:3,margin_v:3,fixed_v:!1});var c=Math.pow(10,b.round),e=this.getGPoints(a,d),f=skip_start=0;b.skip&&(f=b.skip);b.skip_start&&(skip_start=b.skip);0>f&&(f=0);0>skip_start&&(skip_start=0);for(var g,h=skip_start;h<e.length;h+=f+1){a=b.print_vals?b.print_vals[e[h].data_index]:""+Math.round(e[h].val*c)/c;var n=!0,v=e[h].x+b.offset_h,m=e[h].y-b.offset_v;
!1!==b.fixed_v&&(m=b.fixed_v);if((b.margin_h||b.margin_v)&&g){var l=g.getBBox(),r=v-l.width/2-(l.x+l.width),l=Math.max(l.y-m,m-l.height-l.height-l.y);r<b.margin_h&&l<b.margin_v&&(n=!1)}n&&(g=this.svg.text(this.group,v,m,a,d),g.getBBox())}},arrows:function(a,b,d){d=WgUtil.updateObject(d,{offset_v:2,offset_h:0,round:0,min_distance:8});b=this.getGPoints(b);var c=this.svgArrow(),e,f=skip_start=0;d.skip&&(f=d.skip);d.skip_start&&(skip_start=d.skip);0>f&&(f=0);0>skip_start&&(skip_start=0);for(var g,h=skip_start;h<
b.length;h+=f+1)if(e=a[h],e==parseFloat(e)){var n=!0;d.min_distance&&g&&WgUtil.distance(b[h].point,g)<d.min_distance&&(n=!1);n&&(g=b[h].point,e=this.svg.group(this.group,{transform:"translate("+b[h].x+","+(b[h].y-d.offset_v)+") rotate("+e+",0,0) scale(0.12) "}),this.svg.path(e,c,{fill:"black",strokeWidth:0}))}},contourNumbers:function(a,b,d){if(this.contour_bak){b=WgUtil.updateObject(b,{"font-size":"9px",opacity:.35,"text-anchor":"middle"});a=WgUtil.updateObject(a,{offset_v:-3,offset_h:0,px_spacing:150,
px_padding:8,px_space:13,skip:0,round:0});for(var c,e=Math.pow(10,a.round),f,g=[],h,n,v,m=ccntr=0;m<this.contour_bak.length;m++)if(h=this.contour_bak[m],0==ccntr%(a.skip+1)){c=d?""+d[h.level]:""+Math.round(h.level*e)/e;f=a.px_spacing;for(var l=0;l<h.pnts.length;l++)if(n=h.pnts[l],!(n[0]<a.px_padding||n[0]>this.pxwidth-a.px_padding||n[1]<a.px_padding||n[1]>this.pxheight-a.px_padding||(0<l&&(f+=WgUtil.distance(n,h.pnts[l-1])),f<a.px_spacing))){var r;if(r=0<a.px_space)a:{r=n;for(var s=Math.round(r[0]/
a.px_space),t=Math.round(r[1]/a.px_space),p=-1;1>=p;p++)for(var C=-1;1>=C;C++)if(v=s+p+"_"+(t+C),g[v]){var x;b:{x=n;v=g[v];for(var w=0;w<v.length;w++)if(WgUtil.distance(x,v[w])<a.px_space){x=!0;break b}x=!1}if(x){r=!0;break a}}g[s+"_"+t]||(g[s+"_"+t]=[]);g[s+"_"+t][g[s+"_"+t].length]=r;r=!1}r||(f=0,this.svg.text(this.group,n[0]+a.offset_h,n[1]-a.offset_v,c,b))}ccntr++}}},pxDistance:function(a,b,d,c){return Math.sqrt(Math.pow(d-a,2)+Math.pow(c-b,2))},contours:function(a,b,d,c,e){c=WgUtil.updateObject(c,
{cliff:-999999,simplify:0,smooth:0});e=WgUtil.updateObject(e,{fill:"none",stroke:"black",strokeWidth:.13});if(b.length&&(a=WgUtil.deepCopy(a))){var f=a.x,g=a.y,h=a.z;if(!(3>f.length||3>g.length)){var n=h.length;for(a=0;a<n;a++)h[a].push(c.cliff),h[a].unshift(c.cliff);var v=[],n=h[0].length;for(a=0;a<n;a++)v[a]=c.cliff;h.push(v);h.unshift(v);f.push(f[f.length-1]+(f[f.length-1]-f[f.length-2]));f.unshift(f[0]-(f[1]-f[0]));g.push(g[g.length-1]+(g[g.length-1]-g[g.length-2]));g.unshift(g[0]-(g[1]-g[0]));
a=new Conrec;a.contour(h,0,f.length-1,0,g.length-1,f,g,b.length,b);b=a.contourList();this.contour_bak=[];for(f=0;f<b.length;f++){g=b[f];b[f].pnts=[];for(a=0;a<g.length;a++)b[f].pnts[g.pnts.length]=this.getXY(g[a].x,g[a].y,e.strokeWidth);b[f].area=this.polygonArea(g.pnts)}b.sort(function(a,b){return b.area-a.area});for(f=0;f<b.length;f++)g=b[f],a=0<c.simplify?this.douglasPeucker(g.pnts,c.simplify):g.pnts,a=this.makePath(a,c.smooth),a.close(),g=d.getRGB(b[f].level),e.fill=g,this.svg.path(this.group,
a,e);this.contour_bak=b}}},polygonArea:function(a){for(var b=0,d,c,e=a.length,f=0;f<e;f++)d=a[f],c=f+1==e?a[0]:a[f+1],b=b+d[0]*(c[1]-d[1])-d[1]*(c[0]-d[0]);return Math.abs(b/2)},polygonPerimeter:function(a){for(var b=0,d,c,e=a.length,f=0;f<e;f++)d=a[f],c=f+1==e?a[0]:a[f+1],b+=WgUtil.distance(d,c);return b},barbs2d:function(a,b,d){},arrows2d:function(a,b){b=WgUtil.updateObject(b,{offset_v:0,offset_h:0,skip_x:0,skip_y:0,size_x:6,size_y:10});var d=WgUtil.updateObject(d,{fill:"none",strokeWidth:1,stroke:"black",
opacity:.5});if(a){var c=a.x,e=a.y,f=a.z,g,h;if(a.z&&!(0>b.skip_x||0>b.skip_y)){var f=a.z,n=this.svg.createPath();n.move(0,-.5*b.size_y).line(0,.5*b.size_y).move(.5*b.size_x,.1*b.size_y).line([[0,.5*b.size_y],[-.5*b.size_x,.1*b.size_y]]);for(var v=0;v<f.length;v+=b.skip_x+1)for(var m=0;m<f[v].length;m+=b.skip_y+1)g=f[v][m],h=this.getXY(c[v],e[m],d.strokeWidth),g=this.svg.group(this.group,{transform:"translate("+h[0]+","+(h[1]-b.offset_v)+") rotate("+g+",0,0) "}),this.svg.path(g,n,d)}}},douglasPeucker:function(a,
b){for(var d=[],c=a.length,e=0;e<c;e++)d[e]={x:a[e][0],y:a[e][1]};for(var d=function(a,b){var c=function(a,b){this.p1=a;this.p2=b;this.distanceToPoint=function(a){var b=(this.p2.y-this.p1.y)/(this.p2.x-this.p1.x),c=this.p1.y-b*this.p1.x,e=[];0!=this.p2.x-this.p1.x&&e.push(Math.abs(a.y-b*a.x-c)/Math.sqrt(Math.pow(b,2)+1));e.push(Math.sqrt(Math.pow(a.x-this.p1.x,2)+Math.pow(a.y-this.p1.y,2)));e.push(Math.sqrt(Math.pow(a.x-this.p2.x,2)+Math.pow(a.y-this.p2.y,2)));return e.sort(function(a,b){return a-
b})[0]}},e=function(a,b){if(2>=a.length)return[a[0]];for(var d=[],f=new c(a[0],a[a.length-1]),g=0,h=0,m=1;m<=a.length-2;m++){var w=f.distanceToPoint(a[m]);w>g&&(g=w,h=m)}g>=b?(g=a[h],f.distanceToPoint(g,!0),d=d.concat(e(a.slice(0,h+1),b)),d=d.concat(e(a.slice(h,a.length),b))):(g=a[h],f.distanceToPoint(g,!0),d=[a[0]]);return d},d=e(a,b);d.push(a[a.length-1]);return d}(d,b),c=d.length,f=[],e=0;e<c;e++)f[e]=[d[e].x,d[e].y];return f}});
var WgFcst=function(){function a(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}function b(b,t){function m(a,b,e,l){a=this.param=a;b=this.sada=b;var g=this.id=A+"_"+b+"_"+a;this.rownr=1;this.height=q.cell_height_default;this.width=0;q.cell_height[a]&&(this.height=q.cell_height[a]);this.position=[0,0];this.getHtml=function(){var b,I,h,s,r,t;s='<tr id="'+g+'">';s+=this.getLegendHtml();r=N(a);t=ba(a,r);for(var m=e;m<l;m++)da(m)&&(q.special[a]?
s+=q.special[a](m,a):(palete=q.colors[a]?q.colors[a]:"",(b=M(m,a,palete))?s+=b:(b=I=k[a][m],h=!1,f(q.bold[a])&&b>q.bold[a]&&(h=!0),r&&(I=d(b,r)),I=c(I,t),h&&(I='<span style="font-weight:bold !important;">'+I+"</span>"),s+=y(I,WgColors[palete].getRGB(b),"",F(a,m)))));return s+"</tr>"};this.getLegendHtml=function(){var b="",c;c=N(a);var e=" wgfcst-tooltip";"??"==E("tooltip",a)&&(e="");b+='<td class="wgfcst-wgt_legend'+e+'" name="'+E("tooltip",a)+'">'+E("legend",a);c&&(b+=' <span class="wgfcst-link" onclick="WgFcst.switchUnits(\''+
A+"','"+a+"');\">("+E("units",c)+")</span>");return b+"</td>"};this.setRowNr=function(a){this.rownr=a};this.setRowHeight=function(a){this.height=a};this.setRowPosition=function(a){this.position=a};this.draw=function(b){var I,g,s,h;b=WgUtil.updateObject(b,{cellwidth:q.cell_width_default,cellheight:this.height,drawMethod:"canvas",row:this.rownr,rowPosition:this.position});s=N(a);h=ba(a,s);for(var r=0,t=e;t<l;t++)if(da(t))if(r++,b.col=r,q.specialCanvas[a])q.specialCanvas[a](t,a,b);else{palete=q.colors[a]?
q.colors[a]:"";I=t;g=a;var m=palete,p=b,n=void 0;aa(I,g)?I=ja("-","#FFFFFF",p):(n=m?WgColors[m].getRGB(k[g][I]):"#FFFFFF",f(q.minval[g])&&k[g][I]<q.minval[g]?I=ja(!1,n,p):f(q.minval_depend[g])&&f(k[q.minval_depend[g]])&&k[q.minval_depend[g]][I]<q.minval[q.minval_depend[g]]?(q.minval_bgcolor_depend[g]&&(n="#FFFFFF"),I=ja(!1,n,p)):I=!1);I||(I=g=k[a][t],b.bold=!1,f(q.bold[a])&&I>q.bold[a]&&(b.bold=!0),s&&(g=d(I,s)),g=c(g,h),m="#FFFFFF",WgColors[palete]&&(m=WgColors[palete].getRGB(I)),ja(g,m,b))}this.width=
r*q.cell_width_default+(r-1)*q.cell_vspace;return!0}}function n(a){this.name=a;var c=this,e=A+"_menu_"+a;this.id=e;var d,f=this;this.issub=!1;var k=function(){for(var b in q.tabs_submenu)if(-1<b.indexOf(a))return l("#parent_"+A+"_menu_"+b);return!1};this.aktivuj=function(){l("#"+e);pa&&pa.deaktivuj();!q.refresh_tabs[this.name]&&c.content?U.empty().append(c.content):q.tabsjs[this.name]?(c.content=l('<div id="container_'+e+'" style="background-color:#eaeaea !important"></div>').css("overflow","auto"),
U.append(c.content),q.tabsjs[a](c.content)):(c.content=l('<div style="background-color:#eaeaea !important"><img style="padding:10px !important" src="'+u.path_img+'loading.gif"/></div>').load(u.path_lng+"ajax/ajax_fcstab_content.php",{tab:a,id_spot:b.id_spot,h:V.h,w:V.w}).css("overflow","auto"),U.append(c.content));q.tabs_resize[a]?(V.h=U.height(),V.w=U.width()):(c.content.height(V.h),c.content.width(V.w));this.setActive();"forecast"==a&&(u.tooltips&&(g(),ua()),va())};this.deaktivuj=function(){U.children().remove();
var a=k();this.issub||(a?a.removeClass("wgfcst-wgtab_on").addClass("wgfcst-wgtab_off"):l("#"+e).removeClass("wgfcst-wgtab_on").addClass("wgfcst-wgtab_off"))};this.setContent=function(a){d=a};this.getContent=function(){return d};this.setActive=function(){pa=this;var a=k();this.issub||(a?a.removeClass("wgfcst-wgtab_off").addClass("wgfcst-wgtab_on"):l("#"+e).removeClass("wgfcst-wgtab_off").addClass("wgfcst-wgtab_on"))};this.getHtml=function(){var b="";if(q.tabs_submenu[a]){for(var c=q.tabs_submenu[a],
b='<li style="border: 0px"><div id="parent_'+e+'" class="wgfcst-wgtab_off" style="float:left !important;">&nbsp;'+E("tab",a)+'<img src="/images/sdown-666666.png" width="15" height="10"/></div><ul>',d=0;d<c.length;d++){var f=A+"_menu_"+c[d];W[c[d]]=new n(c[d]);W[c[d]].issub=!0;b+='<li id="'+f+'" style="height: 15px !important; line-height: 15px !important;"><a href="javascript:;">'+E("tab",c[d])+"</a></li>"}b+="</ul></li>"}else k()||(b='<li style="border: 0px"><div id="'+e+'" class="wgfcst-wgtab_off" style="float:left !important">&nbsp;'+
E("tab",a)+"&nbsp;</div></li>");return b};this.activateClick=function(){l("#"+e).unbind("click").click(function(){f.aktivuj()})}}function x(){var a=k.modifikace;if(!f(k.WINDSPD)||!f(k.SMERN)||!a)return!1;k.MWINDSPD=[];for(var b=0;b<k.hours.length;b++)if(a){var c=k.MWINDSPD,d=b,l;l=a;var g=k.WINDSPD[b],s=k.SMERN[b];l=e(g)||e(s)?null:l.koef[s]*g;c[d]=l}else k.MWINDSPD[b]=null}function w(a){for(var b=-Number.MIN_VALUE,c=1;c<k.hours.length;c++)e(k[a][c])||k[a][c]>b&&(b=k[a][c]);return b}function S(a,
b,c){var e=-Number.MIN_VALUE,d=Number.MAX_VALUE,l;if(!a||!a.z)return[0,0];for(var g=0;g<a.z.length;g++){l=a.z[g];for(var k=0;k<l.length;k++)f(b)&&a.y[k]<b||f(c)&&a.y[k]>c||(l[k]<d&&(d=l[k]),l[k]>e&&(e=l[k]))}return[d,e]}function D(a){for(var b=Number.MAX_VALUE,c=1;c<k.hours.length;c++)e(k[a][c])||k[a][c]<b&&(b=k[a][c]);return b}function y(a,b,c,e,d){var f="",l="";d=d||{width:q.cell_width_default};var g="",k="";b&&(g+="background-color:"+b+" !important;");d.width&&(g+="width:"+d.width+"px !important;");
e&&(l=' onclick="'+e+'"');e&&(c+=" wgfcst-pointer");c&&(f=' class="'+c+'"');g&&(k=' style="'+g+'"');return"<td "+k+f+l+">"+a+"</td>"}function z(a,b){var e;if(e=M(a,b,""))return e;e=k[b][a];e=1E3<e?c(e/1E3,1)+"k":c(e,-1);return y(e,"#FFFFFF","",F(b,a))}function B(a,b){var c,e="";if(c=M(a,b,q.colors[b]))return c;if(!f(k.PCPT))return y("-","#FFFFFF",e,F(b,a));1==k.PCPT[a]&&(e+=" wgfcst-snow");return y(Q(k[b][a],b),WgColors[q.colors[b]].getRGB(k[b][a]),e,F(b,a))}function R(a,b){var c;if(aa(a,b))return y("-",
"#FFFFFF","",F(b,a));if(f(q.minval_depend[b])&&k[q.minval_depend[b]][a]<q.minval[q.minval_depend[b]])return y("&nbsp;","#FFFFFF","",F(b,a));c=k[b][a];var e;0<=c&&(e=0);11.25<=c&&(e=1);33.75<=c&&(e=2);56.25<=c&&(e=3);78.75<=c&&(e=4);101.25<=c&&(e=5);123.75<=c&&(e=6);146.25<=c&&(e=7);168.75<=c&&(e=8);191.25<=c&&(e=9);213.75<=c&&(e=10);236.25<=c&&(e=11);258.75<=c&&(e=12);281.25<=c&&(e=13);303.75<=c&&(e=14);326.25<=c&&(e=15);348.75<=c&&(e=0);c=e;c=r&&u.svg_allow?'<div style="width:20px !important;height:20px !important;" class="wgfcst-wg_svg_dir" title="'+
E("dir",c)+" ("+k[b][a]+'&deg;)" alt="'+k[b][a]+'"/>':'<img src="'+u.path_img+"sipky/s"+c+'.gif" width="20" height="20" title="'+E("dir",c)+" ("+k[b][a]+'&deg;)" alt="'+E("dir",c)+'"/>';return y(c,"#FFFFFF","",F(b,a))}function aa(a,b){return!f(k[b])||e(k[b][a])?!0:!1}function M(a,b,c,e,d){if(aa(a,b))return y("-","#FFFFFF",e,F(b,a));c=c?WgColors[c].getRGB(k[b][a]):"#FFFFFF";return f(q.minval[b])&&k[b][a]<q.minval[b]?y("&nbsp;",c,e,F(b,a)):f(q.minval_depend[b])&&f(k[q.minval_depend[b]])&&k[q.minval_depend[b]][a]<
q.minval[q.minval_depend[b]]?(q.minval_bgcolor_depend[b]&&(c="#FFFFFF"),y("&nbsp;",c,e,F(b,a))):!1}function F(a,c){return u.fcst_maps&&f(k.img_param[a])?k.img_param[a]?"WgFcst.showMap('"+A+"','ajax/ajax_view_img_latlon.php?par="+k.img_param[a]+"&hr="+k.hours[c]+"&model="+b.id_model+"&initstr="+k.initstr+"&lat="+b.lat+"&lon="+b.lon+"&tzid="+encodeURIComponent(b.tzid)+"');":!1:!1}function Q(a,b){return f(q.precision[b])?c(a,q.precision[b]):c(a,0)}function N(a){return f(q.unit_type[a])?ka[q.unit_type[a]]:
!1}function ba(a,b){var c=0;f(q.precision[a])&&(c=q.precision[a]);b&&f(q.precision_units[b])&&(c=q.precision_units[b]);return c}function ha(){G=[];for(var a=0,b=0,c=0;c<K.length;c++){P[c]=[];for(var e=0;e<X.length;e++)P[c][e]=new m(X[e],c,K[c][0],K[c][1]),G[G.length]=P[c][e],a++,P[c][e].setRowNr(a),P[c][e].setRowPosition([0,b]),b+=P[c][e].height+q.cell_hspace}}function ia(a){if(b.error)return'<div style="display:inline-block !important;" class="wgfcst-hlaska-err">Windguru forecast error:<br/><span style="color:#000000 !important;font-weight:normal !important;font-size:11px !important;">'+
b.error+"</span></div>";var c="";k=b.fcst[b.id_model];var e=b.fcst[b.id_model_wave],d="",f="",l="";b.id_spot&&10!=b.id_model||(u.options_link=!1);u.options_link&&(d='<div class="wgfcst-male" style="width:0px !important; height:0px !important; float:right !important; position: relative !important;"><div class="wgfcst-optbox" id="'+A+'_options_div"><img id="'+A+'_options_close" alt="close" style="float: right !important;" src="'+u.path_img+'close.gif"><span style="font-weight:bold !important;">'+E("txt",
"choose_m")+': </span><a class="wgfcst-helpik" href="help_index.php?sec=windmod" target="_blank">?</a><div style="margin: 0px !important; padding: 0px !important; width: 320px !important;" id="'+A+'_options_div_content"></div></div></div><span class="wgfcst-link" style="float:right !important; margin-right:2px !important; margin-left:2px !important;" id="'+A+'_options_link">['+E("txt","options")+"]</span>");var g="";u.poweredby&&(g='<span style="float:right !important; font-weight:bold !important; margin-right:2px !important; margin-left:2px !important;"><a class="wgfcst" '+
u.targetblank+' href="'+u.path_lng+"index.php?sc="+b.id_spot+' target="_top">Powered by Windguru</a></span>');b.id_model_wave&&(f='<span class="wgfcst-male">&nbsp;(wave: '+e.model_name+" "+e.init_d+" "+e.init_h+" UTC)</span>");169!=b.id_user&&b.id_spot&&(l='&nbsp;&nbsp;<span style="font-weight:bold !important;">(<a href="'+u.path_lng+"user_profil.php?usrid="+b.id_user+'" class="wgfcst wgfcst-awginfo">'+b.nickname+"</a>)</span>");c+='<table cellspacing="0" cellpadding="0" border="0" class="wgfcst-fcsttab" style="background: url('+
u.path_img+'tabback50.gif) #C7C7C7 repeat-x top !important;"><tbody>';u.first_row&&(e="",u.first_row_minfo&&(e='<span class="wgfcst-male">&nbsp;'+k.model_name+" "+k.init_dm+" "+k.init_h+" UTC</span>"+f),u.first_row_mwinfo&&(e=f),f="",u.spotname&&(f='<a class="wgfcst" style="color:black !important;text-decoration:none !important; font-weight:bold !important;" '+u.targetblank+' href="'+u.path_lng+"index.php?sc="+b.id_spot+'" target="_top">'+b.spot+"</a>"+l+"&nbsp;"),c+='<tr><td><div style="height:17px !important; text-align:left !important; line-height:17px !important;"><div class="wgfcst-hlavicka" style="float:left !important; padding-left: 2px !important;">'+
f+e+"</div>"+d+g+"</div></td></tr>");d="";u.tabs||(d=' style="display:none !important"');d="<tr"+d+'><td><ul class="sf-menu">'+ea("views");b.levels&&(d+=ea("views_2d"));b.id_spot&&(d+=ea("id_spot"));b.id_spot&&(d+=ea("free"));!b.id_spot||169!=b.id_user&&2!=b.id_user||(d+=ea("paid"));if(b.wgs&&r){var h;b.wgs_arr&&(h="onmouseover=\"$('#"+A+"_wgs_arr').show();\" onmouseout=\"$('#"+A+"_wgs_arr').hide();\" onclick=\"$('#"+A+"_wgs_arr').toggle();\"");l="#ffffff";b.wgs_wind_avg&&(l=WgColors.wind.getRGB(b.wgs_wind_avg));
d+="<li "+h+' style=" height:18px;border-left:0px;"><div style="position: absolute; top:-11px; left:5px;height: 25px; width:38px;">'+wa(l)+'</div><div style="position: absolute; top:0px; left:42px; width:80px;">WG spot</div>';if(b.wgs_arr){d+='<div id="'+A+'_wgs_arr" '+h+' class="wgs_arr" style="display:none; overflow: visible; position: absolute; height: 0px; "><div style="border: 1px solid #666; padding: 5px; overflow: auto; overflow-x:hidden; background: #F7F7F7; white-space: nowrap; max-height: 250px; -moz-box-shadow: 3px 3px 4px #666666;-webkit-box-shadow: 3px 3px 4px #666666;box-shadow: 3px 3px 4px #666666;">';
d+="Nearby windguru stations:";for(h=0;h<b.wgs_arr.length;h++)g=b.wgs_arr[h],l="#ffffff",g.wind_avg&&(l=WgColors.wind.getRGB(g.wind_avg)),d+='<div class="wgs_spot_station" style="white-space: nowrap"><a href="http://station.windguru.cz/?id='+g.id+'" target="_blank"><div style="position: relative; height: 22px; width:30px; display: inline-block; vertical-align: middle;">'+wa(l,"#000000")+"</div>"+g.station+" ("+g.distance+" km) </a></div>";d+="</div></div>"}}d+="</li>";d+="</ul>";d+="</td></tr>";c+=
d;c+='<tr><td><div id="'+A+'_content_div">';a&&(c+=O());return c+="</div></td></tr></tbody></table>"}function O(){var a='<table id="'+A+'" border="0" style="background-color:#ffffff !important; table-layout: '+u.table_layout+" !important;";"fixed"==u.table_layout&&(a+="width: "+q.table_width+"px !important; ");a+='" cellspacing="1" cellpadding="1" class="wgfcst-forecast"><tbody>';if(b.custom_onlypro)a+='<tr><td style="padding:0px !important;" colspan="'+(K[0][1]+1)+'"><table border="0" cellspacing="0" cellpadding="2"><tr><td class="wgfcst-wgt_legend"><span class="wgfcst-hlavicka"><span style="font-weight:bold !important;"><a class="wgfcst" href="'+
u.path_lng+"model_info.php?model="+b.model+'" wgwidth="400px" class="wgfcst-awginfo">'+k.model_name+"</a></span></span></td>",a+='<td class="wgfcst-hlaska-err">'+E("txt","custom_onlypro")+"</td></tr></table></td></tr>";else{b.delayed&&(a+='<tr><td colspan="'+(K[0][1]+1)+'" class="wgfcst-hlaska-err">'+E("txt","delayed")+"</td></tr>");for(var c=0;c<K.length;c++){var d=K[c][0],f=K[c][1],l=1,g="",h="",r=k.hr_d[0],g=g+"<tr>",t=minfo=mlink="";u.wg_logo?minfo='<span id="'+A+'_datainfo"><a class="wgfcst-link" '+
u.targetblank+' href="'+u.path_lng+"index.php?sc="+b.id_spot+'" target="_top"><img src="'+u.path_img+'wglogobg95.png" border="0" width="94" height="35" alt="WG logo"/></a></span>':(k.initstamp&&(h='<br/><span id="'+A+'_datainfo">'+k.init_d+"<br/>"+k.init_h+" UTC</span>"),mlink=u.model_link?'<a href="'+u.path_lng+"model_info.php?model="+b.model+'" wgwidth="400px" class="wgfcst-awginfo wgfcst-link">'+k.model_name+"</a>":k.model_name,minfo='<span class="wgfcst-hlavicka"><span style="font-weight:bold !important;">'+
mlink+"</span></span>"+h+"");g+="<td ";"fixed"==u.table_layout&&(g+=' style="width:'+q.legend_width+'px !important;"');for(g+=' class="wgfcst-wgt_legend" '+t+' rowspan="2">'+minfo+"</td>";d<f;d++)da(d)&&(r!==k.hr_d[d]&&(r=k.hr_d[d],l=1==l?2:1),g+=y(E("weekday",k.hr_weekday[d])+"<br/>"+k.hr_d[d]+".","","wgfcst-day"+l));g+="</tr>";a+=g;f=K[c][1];l=1;g="";r=k.hr_d[0];g+="<tr>";for(d=K[c][0];d<f;d++)da(d)&&(r!==k.hr_d[d]&&(r=k.hr_d[d],l=1==l?2:1),g+=y(k.hr_h[d]+"h","","wgfcst-day"+l));g+="</tr>";a+=g;
for(f=0;f<P[c].length;f++)a+=P[c][f].getHtml()}}a+="</tbody></table>";u.last_row&&(c=a,a='<div class="wgfcst-male" style="width:100% !important; height:16px !important; padding:1px 0px 0px 0px !important; text-align:left !important; background-color:#EAEAEA !important;"><div style="float:left !important; height:16px !important; line-height:14px !important; padding:0px 0px 0px 3px !important;">',f="",u.lat_lon&&(f+='Lat: <span style="font-weight:bold !important;">'+b.lat+'</span>, Lon: <span style="font-weight:bold !important;">'+
b.lon+"</span>, "),!e(b.alt)&&u.lat_lon&&(f+='<span title="model alt: '+b.model_alt+'">Alt: <span style="font-weight:bold !important;">'+b.alt+" m</span></span>, "),u.tz&&(f+=""+E("txt","timezone")+': <span style="font-weight:bold !important;">'+b.tz+"</span> "+b.tzutc),u.sun&&(f+=' <img style="vertical-align:middle !important;" src="'+u.path_img+'sun.gif" width="16" height="15" hspace="0" vspace="0"/>'+b.sunrise+" - "+b.sunset),!e(b.sst)&&u.sst&&(f+=' <span class="wgfcst-tooltip"  name="'+E("tooltip",
"sst")+'"><img style="vertical-align:middle !important;" src="'+u.path_img+'watertemp.png" width="15" height="15" hspace="0" vspace="0" align="absmiddle"/>'+b.sst+" \u00b0C</span>"),a+=f+'</div><div style="float:right !important; line-height:14px !important;">&nbsp;',0<b.id_spot&&u.link_detail&&(a+='<a class="wgfcst" '+u.targetblank+' href="'+u.path_lng+"spot.php?id_spot="+b.id_spot+'">['+E("txt","detail")+"]</a>&nbsp;"),0<b.tides&&u.link_tides&&(a+='<a class="wgfcst" '+u.targetblank+' href="'+u.path_lng+
"tide.php?id_spot="+b.id_spot+'">['+E("txt","tides")+"]</a>&nbsp;"),169!=b.id_user&&2!=b.id_user||!u.link_archive||(a+='<a class="wgfcst" '+u.targetblank+' href="'+u.path_lng+"historie.php?id_spot="+b.id_spot+"&model="+b.model+'">['+E("txt","archive")+"]</a>&nbsp;"),b.id_spot&&u.link_link&&(a+='<a class="wgfcst" '+u.targetblank+' href="'+u.path_lng+"index.php?sc="+b.id_spot+'" target="_top">['+E("txt","link")+"]</a>&nbsp;"),a=c+(a+"</div>"));return a}function L(a,c,e){c=c||[0];e=e||[3,6,9,12,15,18,
21];var d=[0,6,12,18];1>=k.hours[1]-k.hours[0]&&(d=[0,3,6,9,12,15,18,21]);var f=new Date,g=new Date,h=new Date;f.setTime(1E3*(3600*(k.hours[0]+b.utc_offset)+k.initstamp));g.setTime(1E3*(k.initstamp+3600*b.utc_offset+3600*k.hours[k.hours.length-1]));a.setXRange(f.getTime(),g.getTime());for(var r=[],t=[],m=[],p=[],n=[],C=[],v,q=f.getTime();q<=g.getTime();q+=36E5)h.setTime(q),v=h.getUTCHours(),-1<l.inArray(v,c)&&(r[r.length]=q),-1<l.inArray(v,e)&&(t[t.length]=q),-1<l.inArray(v,d)&&(n[n.length]=q,C[C.length]=
""+v+"h"),12==v&&(m[m.length]=q,p[p.length]=E("weekday",h.getUTCDay())+" "+h.getUTCDate()+"."+(h.getUTCMonth()+1)+".");c=[];h=new Date;e=new Date;h.setTime(f.getTime()-864E5);h.setUTCHours(0);e.setTime(g.getTime());e.setUTCHours(0);q=b.sunrise.split(":");d=parseFloat(q[0])+parseFloat(q[1])/60;q=b.sunset.split(":");v=parseFloat(q[0])+parseFloat(q[1])/60;for(q=h.getTime();q<=e.getTime();q+=864E5)h=[q+36E5*v,q+864E5+36E5*d],h[0]<f.getTime()&&(h[0]=f.getTime()),h[1]>g.getTime()&&(h[1]=g.getTime()),c[c.length]=
[h[0],h[1]];a.gridRects(c,{fill:"#000088",stroke:"none",strokeWidth:0,opacity:.05});a.gridLinesV(t,{strokeWidth:.5,opacity:.1,"stroke-dasharray":"2,2"});a.gridLinesV(r,{strokeWidth:1,opacity:.3});a.setXVals(m);a.texts(p,{ypos:a.y.range[1],skip:0,offset_v:-25,offset_h:0},{"font-size":"11px"});a.setXVals(n);a.texts(C,{ypos:a.y.range[1],skip:0,offset_v:-35,offset_h:0},{"font-size":"10px",opacity:.5})}function T(a,b){var c=q.csteps[b],e=Math.floor(d(a[0],b)),f=Math.ceil(d(a[1],b));a=WgUtil.rangeArr(e,
f,c);c=[];for(e=0;e<a.length;e++){var f=e,l;l=a[e];var g=b,h=void 0;WgUtil.inArray(g,q.unit.wind)?h="knots":WgUtil.inArray(g,q.unit.temp)?h="c":WgUtil.inArray(g,q.unit.wave)&&(h="m");l=d(l,h,g);c[f]=l}return c}function H(a,b,e){var f=[];b=ba(b,e);for(var l=0;l<a.length;l++)f[a[l]]=c(d(a[l],e),b);return f}function sa(c,e,d){if(a()){var f=k.hours[0],g=k.hours[k.hours.length-1],h=l(window).width()-150;1100>h&&(h=1100);var r=17*k.hours.length;r>h&&(r=h);r+=10;c.width(r).height(500).css("background-color",
"#FFFFFF !important");c.svg();c.css("overflow","hidden");c=new WgSvg.Canvas(c);c.svg.rect(0,0,r,500,0,0,{fill:"#FFFFFF",strokeWidth:0});var h=new WgSvg.Graph(c,{px_position:[0,0],px_dimensions:[r,500],px_padding:[40,40,0,0],clip:!0},{opacity:1}),t=[f,g],m=[e,d];h.setRange(t,m);graph_content_position={top:40,left:0,width:r-40-0,height:460};h.setRange(t,m);b.TMP_2d||(t={id_spot:b.id_spot,id_model:b.id_model,q:["TMP,0,5500"],md5chk:b.md5chk},b.id_spot||(t.lat=b.lat,t.lon=b.lon),l.ajax({url:"/int/ajax/ajax_json_2d_data.php",
dataType:"json",data:t,async:!1,success:function(a){b.TMP_2d=a}}));var m=S(b.TMP_2d.TMP,e,d+1E3),t=N("TMP"),m=T(m,t),p=!1;"knots"!=t&&(p=H(m,"TMP",t));h.contours(b.TMP_2d.TMP,m,WgColors.temp);h.contourNumbers({px_spacing:200},{},p);k.FLHGT&&(h.setXVals(k.hours),h.line(k.FLHGT,.6,{stroke:"#0000FF"}),h.numbers(k.FLHGT,{offset_v:3,skip:1},{fill:"#0000FF"}));h=new WgSvg.Graph(c,{px_position:[0,0],px_dimensions:[r,500],px_padding:[0,40,0,0]},{opacity:1});L(h);h=new WgSvg.Graph(c,{px_position:[0,0],px_dimensions:[r,
500],px_padding:[40,40,0,0]});h.setRange([f,g],[e,d]);xa(h,e,d,f,g);la(h,r," ")}else ma(c)}function ta(c,e,d){if(a()){var f=k.hours[0],g=k.hours[k.hours.length-1],h=l(window).width()-150;1100>h&&(h=1100);var r=17*k.hours.length;r>h&&(r=h);r+=10;c.width(r).height(500).css("background-color","#FFFFFF !important");c.svg();c.css("overflow","hidden");c=new WgSvg.Canvas(c);c.svg.rect(0,0,r,500,0,0,{fill:"#FFFFFF",strokeWidth:0});h=new WgSvg.Graph(c,{px_position:[0,0],px_dimensions:[r,500],px_padding:[40,
40,0,0],clip:!0},{opacity:1});h.setRange([f,g],[e,d]);graph_content_position={top:40,left:0,width:r-40-0,height:460};if(!b.WIND_2d){var t={id_spot:b.id_spot,id_model:b.id_model,q:["WINDSPD,0,5500","WINDDIR,0,5500,250"],md5chk:b.md5chk};b.id_spot||(t.lat=b.lat,t.lon=b.lon);l.ajax({url:"/int/ajax/ajax_json_2d_data.php",dataType:"json",data:t,async:!1,success:function(a){b.WIND_2d=a}})}if(b.WIND_2d.WINDSPD){var m=S(b.WIND_2d.WINDSPD,0,d+1E3),t=N("WINDSPD");"bft"==t&&(t="knots");m=T(m,t);t=H(m,"WINDSPD",
t);h.contours(b.WIND_2d.WINDSPD,m,WgColors.wind);h.contourNumbers({px_spacing:250},{},t);b.WIND_2d.WINDDIR&&h.arrows2d(b.WIND_2d.WINDDIR)}h=new WgSvg.Graph(c,{px_position:[0,0],px_dimensions:[r,500],px_padding:[0,40,0,0]},{opacity:1});L(h);h=new WgSvg.Graph(c,{px_position:[0,0],px_dimensions:[r,500],px_padding:[40,40,0,0]});h.setRange([f,g],[e,d]);xa(h,e,d,f,g);la(h,r," ")}else ma(c)}function xa(a,c,d,l,g){var h=100*Math.round((d/100-c/100)/11);c=Math.round(c/h)*h;a.legend({fill:"none",stroke:"#AAAAAA",
strokeWidth:1,opacity:1,"stroke-dasharray":"3,3"},{width:0,left:0,line_width:27,line_left:0,text_left:3,text_offset:3,desc_left:37},WgUtil.rangeArr(c,d,h),WgUtil.rangeArr(c,d,h),{"font-size":"10px",opacity:1,"text-anchor":"start"},"Altitude (m)");a.gridLinesH(WgUtil.rangeArr(c,d,h),{opacity:.3,"stroke-dasharray":"3,3"});d=Math.min(b.alt,b.model_alt);f(d)&&0<d&&a.gridRect(l,g,{strokeWidth:0,opacity:.5,fill:"#FFFFFF"},0,d);e(b.alt)||(a.gridLineH(b.alt,{strokeWidth:1,opacity:1,"stroke-dasharray":"3,3"}),
a.text(g,b.alt,"Alt: "+b.alt+" m",{offset_h:-2},{"text-anchor":"end"}));e(b.model_alt)||(a.gridLineH(b.model_alt,{strokeWidth:1,opacity:1,stroke:"#AA0000","stroke-dasharray":"3,3"}),a.text(l,b.model_alt,"model alt: "+b.model_alt+" m",{offset_h:2},{"text-anchor":"start",fill:"#AA0000"}))}function ya(a){var c=0,d=0+a;e(b.alt)||(c=b.alt,d=b.alt+a);!e(b.model_alt)&&b.model_alt<c&&(c=b.model_alt);return[c,d]}function la(a,c,e){e=e||"WgFcst.svgGraphHelp();";a.svg.rect(-1,.5,c+2,14,0,0,{fill:"#FFFFFF",stroke:"black",
strokeWidth:1,opacity:1});a.svg.text(2,12,""+k.model_name+", init: "+k.init_d+" "+k.init_h+" UTC",{"font-family":"Arial, Helvetica, sans-serif","font-size":"11px","font-weight":"bold",opacity:1,"text-anchor":"start",fill:"black"});" "!=e&&a.svg.text(c-3,12,E("txt","help"),{"font-family":"Arial, Helvetica, sans-serif","font-size":"11px",opacity:1,"text-anchor":"end",fill:"#000099","font-weight":"normal",onclick:e,cursor:"help"});b.delayed&&a.svg.text(c/2,12,E("txt","delayed_short"),{"font-family":"Arial, Helvetica, sans-serif",
"font-size":"11px","font-weight":"normal",opacity:1,"text-anchor":"middle",fill:"red"})}function ca(a){var b=N(a),e=ba(a,b);"msd"==b&&(e=0);for(var f=[],l=0;l<k[a].length;l++)f[l]=b?d(k[a][l],b):k[a][l],f[l]=c(f[l],e);return f}function qa(){U=l("#"+A+"_content_div");if(u.tabs){W.forecast.setActive();W.forecast.setContent(U.contents());V.w=U.width();V.h=U.height();for(var a in W)W[a].activateClick()}l(".wgfcst-wg_svg_dir").svg({onLoad:WgFcst.makeDirSVG,width:20,height:20});va();u.tooltips&&(g(),ua())}
function va(){u.options_link&&(fa=l("#"+A+"_options_div"),ra=l("#"+A+"_options_div_content"),l("#"+A+"_options_link").unbind("click").click(function(){za()}),l("#"+A+"_options_close").unbind("click").click(function(){fa.hide()}))}function ua(){l(function(){l("#"+A+"_datainfo").tooltip({bodyHandler:function(){var a="",b=new Date(k.update_last),c=new Date(k.update_next),e=new Date,e=(c.getTime()-e.getTime())/6E4,d="<br/>"+E("txt","timeleft")+": ";if(0<e){var f;f=parseInt(e/60);e-=60*f;e=e.toFixed();
d+='<span style="font-weight:bold !important;">'+f+" h "+Y(e)+" m</span>"}else d+="-";a+='<span style="font-weight:bold !important;">'+k.model_name+"</span>, init "+k.init_d+" "+k.init_h+" UTC<br/><br/>";a+=E("txt","lastupdated")+': <span style="font-weight:bold !important;">'+Y(b.getHours())+":"+Y(b.getMinutes())+"</span> ("+Y(b.getUTCHours())+":"+Y(b.getUTCMinutes())+" UTC)<br/>";return a+=E("txt","nextexpected")+': <span style="font-weight:bold !important;">'+Y(c.getHours())+":"+Y(c.getMinutes())+
"</span> ("+Y(c.getUTCHours())+":"+Y(c.getUTCMinutes())+" UTC)"+d}})})}function Y(a){a=parseInt(a);return 10>a?"0"+a:a}function ea(a){for(var b="",c=0;c<q.tabs[a].length;c++)W[q.tabs[a][c]]=new n(q.tabs[a][c]),b+=W[q.tabs[a][c]].getHtml();return b}function wa(a,b){a||(a="#ffffff");b||(b="#000");return'<svg version="1.1" width="100%" height="100%" viewBox="0 0 800 550"><g transform="translate(-0.8843987,-231.09524)"><path stroke="'+b+'" stroke-dasharray="none" stroke-miterlimit="4" stroke-width="10" fill="'+
a+'" d="M429.69,236.87c-169.12-9.19-323.91,64.35-347.89,182.09-42.909,210.67,302.57,297.78,471.42,207.79-65.4,118.95-343.75,106.42-547.34-40.72,215.85,285.78,671.44,216.7,714.08,7.38,42.63-209.31-302.57-297.78-471.42-207.79,65.4-118.95,343.76-106.63,547.34,40.51-94.43-125.03-234.65-182.12-366.19-189.26z"/></g></svg>'}function E(a,b){return na[a]&&na[a][b]?na[a][b]:"??"}function da(a){return k.hours[a]>u.fhours?!1:k.hr_h[a]<u.odh||k.hr_h[a]>u.doh?!1:!0}function Aa(a,b){for(var c=0;c<K.length;c++){for(var e,
d=0;d<P[c].length;d++)P[c][d].param==a&&(e=new m(b,c,K[c][0],K[c][1]),l("#"+P[c][d].id).after(e.getHtml()));e&&P[c].splice(d,0,e)}G=[];for(c=0;c<K.length;c++)for(e=0;e<P[c].length;e++)G[G.length]=P[c][e]}function Ba(a){for(var b=0;b<G.length;b++)G[b].param==a&&l("#"+G[b].id).remove();a=G;for(b=0;b<a.length;b++)l.inArray(b,a)}function Ca(a){for(var b=0;b<G.length;b++)if(G[b].param==a)return!0;return!1}function za(){f(fa)&&(fa.toggle(),"block"==fa.css("display")&&""==ra.text()&&ra.load(u.path_lng+"ajax/ajax_fcst_modi_menu.php",
{id_spot:b.id_spot,id_model:b.id_model,width:320,tab_id:A,id_modifikace:b.fcst[b.id_model].id_modifikace}))}function ma(a){var b={w:1E3,h:400};V.h&&(b=V);a.height(b.h);a.width(b.w);a.load(u.path_lng+"ajax/ajax_no_svg.php",{info:"nograph"}).css("overflow","auto")}function ja(a,b,c){c=WgUtil.updateObject(c,{cellwidth:q.cell_width_default,cellheight:q.cell_height_default,cellspaceh:q.cell_hspace,cellspacev:q.cell_vspace,row:1,col:1,rowPosition:[0,0],bold:!1,fontSize:11});var e=c.cellwidth+c.cellspaceh;
b=new Kinetic.Rect({x:(c.col-1)*e+c.cellwidth/2,y:c.rowPosition[1]+c.cellheight/2,offset:[c.cellwidth/2,c.cellheight/2],width:c.cellwidth,height:c.cellheight,fill:b});ga.kineticLayer.add(b);a&&(b="normal",c.bold&&(b="bold"),a=new Kinetic.Text({x:(c.col-1)*e+c.cellwidth/2,y:c.rowPosition[1],text:a,fontSize:c.fontSize,fontStyle:b,width:100,height:c.cellheight,offset:[50,-(c.cellheight/2-c.fontSize/2)],align:"center",lineHeight:1,fontFamily:"Arial",fill:"black"}),ga.kineticLayer.add(a));return!0}var ga=
this,q={unit:{wind:"knots ms msd kmh mph bft".split(" "),temp:["c","f"],wave:["m","ft"]},current_units:{wind:"knots",temp:"c",wave:"m"},csteps:{knots:[[20,1],[50,2],[9999,5]],ms:[[15,.5],[30,1],[40,2],[100,5],[9999,10]],msd:[[15,.5],[30,1],[40,2],[100,5],[9999,10]],kmh:[[40,2],[80,5],[200,10],[9999,20]],mph:[[20,1],[40,2],[60,5],[9999,10]],bft:1,c:1,f:2},tabs:{views:["forecast","graph"],views_2d:["2d"],id_spot:["map"],free:["webcams","reports"],paid:["accommodation","schools","shops","other"],wgs:["wgspot"]},
tabs_submenu:{"2d":["2d_t","2d_t_l","2d_w","2d_w_l"]},tabsjs:{graph:function(b){if(a())if(k.HTSGW&&!k.WINDSPD)if(a()){var c=k.hours[0],e=k.hours[k.hours.length-1],d=l(window).width()-150;1100>d&&(d=1100);var g=17*k.hours.length;g>d&&(g=d);var d=per_height=0,h;h=w("HTSGW");0<h&&(d=w("PERPW"),h+=.6,15<h&&(h=15),2>h&&(h=2),per_height=15*(d+2),d=Math.round(Math.max(35*h,per_height)),500<d&&(d=500));h=35+d;b.width(g).height(h).css("background-color","#FFFFFF !important");b.svg();b.css("overflow","hidden");
b=new WgSvg.Canvas(b);var s;b.svg.rect(0,0,g,h,0,0,{fill:"#FFFFFF",strokeWidth:0});s=new WgSvg.Graph(b,{px_position:[0,0],px_dimensions:[g,h],px_padding:[0,30,0,0]});L(s);graph_content_position={top:0,left:0,width:g-30-0,height:h};s=new WgSvg.Graph(b,{px_position:[0,0],px_dimensions:[g,d],px_padding:[0,30,0,0]});s.setRange([c,e],[0,d/35]);s.setXVals(k.hours);h="HTSGWgradient"+A;s.linearGradientV(h,WgColors.htsgw);s.legend({fill:"url(#"+h+")",stroke:"#EAEAEA",strokeWidth:1,opacity:1},{width:5,left:5,
line_width:20,line_left:0,text_left:12,text_offset:3,desc_left:27},[1,2,3,4,5,6,7,8,9,10,11,12],[1,2,3,4,5,6,7,8,9,10,11,12],{"font-size":"10px",opacity:1,"text-anchor":"left"},"Significant wave height (m)");s.area(k.HTSGW,.8,{fill:"url(#"+h+")",stroke:"none",opacity:.8});s.line(k.HTSGW,.8,{strokeWidth:1.5});print_values=ca("HTSGW");s.numbers(k.HTSGW,{offset_v:4,skip:1,print_vals:print_values},{"font-size":"10px"});s.arrows(k.DIRPW,k.HTSGW,{offset_v:-7,offset_h:0,round:0});k.PERPW&&(s.setRange([c,
e],[0,d/15]),s.line(k.PERPW,.8,{stroke:"#FF0000",strokeWidth:1.5,"stroke-dasharray":"3,3"}),s.numbers(k.PERPW,{offset_v:4,skip:1,skip_start:1},{"font-size":"10px",fill:"#FF0000"}));la(s,g,"WgFcst.svgGraphWaveHelp();")}else ma(b);else{var c=k.hours[0],e=k.hours[k.hours.length-1],r=l(window).width()-150;1100>r&&(r=1100);g=17*k.hours.length;g>r&&(g=r);var r=0,t=250,m=per_height=0,p,n;k.HTSGW&&(p=w("HTSGW"));k.HTSGW&&0<p&&(r=w("PERPW"),p+=.6,15<p&&(p=15),2>p&&(p=2),per_height=8*(r+2),m=Math.round(Math.max(25*
p,per_height)),300<m&&(m=300),r=15);k.GUST?d=w("GUST"):k.WINDSPD&&(d=w("WINDSPD"));d+=6;50<d&&(d=50);20>d&&(d=20);var t=Math.round(6*d),q=200+t+35+m+r;b.width(g).height(q).css("background-color","#FFFFFF !important");b.svg();b.css("overflow","hidden");b=new WgSvg.Canvas(b);b.svg.rect(0,0,g,q,0,0,{fill:"#FFFFFF",strokeWidth:0});p=new WgSvg.Graph(b,{px_position:[0,0],px_dimensions:[g,q],px_padding:[0,30,0,0]});L(p);graph_content_position={top:0,left:0,width:g-30-0,height:q};k.MCDC&&(p=new WgSvg.Graph(b,
{px_position:[0,100],px_dimensions:[g,100],px_padding:[0,30,0,0]}),p.setRange([c,e],[0,100]),p.setXVals(k.hours),p.area(k.MCDC,.5,{fill:"black",stroke:"none",strokeWidth:0,opacity:.3}),p=new WgSvg.Graph(b,{px_position:[0,0],px_dimensions:[g,100],px_padding:[0,30,0,0]}),p.setRange([c,e],[0,100]),p.setXVals(k.hours),p.setInvert(!0),p.area(k.MCDC,.5,{fill:"black",stroke:"none",strokeWidth:0,opacity:.3}));p=new WgSvg.Graph(b,{px_position:[0,0],px_dimensions:[g,200],px_padding:[0,30,0,0]});p.setRange([c,
e],[0,100]);p.setXVals(k.hours);k.HCDC&&(p.setInvert(!0),p.area(k.HCDC,.5,{fill:"black",stroke:"none",strokeWidth:0,opacity:.15}));k.LCDC?(p.setInvert(!1),p.area(k.LCDC,.5,{fill:"black",stroke:"none",strokeWidth:0,opacity:.55})):k.TCDC&&(p.setInvert(!1),p.area(k.TCDC,.5,{fill:"black",stroke:"none",strokeWidth:0,opacity:.7}));k.RH&&(p.setRange([c,e],[0,100]),p.setXVals(k.hours),p.line(k.RH,.8,{stroke:"#00c600",strokeWidth:1.5}),p.numbers(k.RH,{offset_v:-11,skip:2},{fill:"#00c600"}));p.setLimits();
if(k.SLP){var q=p,v=w("SLP"),C=D("SLP");q.setFloatingYRange(40,1013,v,C,5,5);p.setXVals(k.hours);p.line(k.SLP,.8,{stroke:"#3344ff",strokeWidth:1.5});p.numbers(k.SLP,{offset_v:3,skip:2,skip_start:2},{fill:"#3344ff"})}k.APCP?n=k.APCP:k.APCP1&&(n=k.APCP1);if(n){p.setRange([c,e],[0,20]);p.setXVals(k.hours);p.resetIgnore();if(f(k.PCPT))for(q=0;q<k.hours.length;q++)1==k.PCPT[q]&&p.setIgnore(q);p.setLimits(.3);p.bar(n,.25,{fill:"#2222FF"});p.setLimits(1);p.numbers(n,{offset_v:-8,round:1},{"font-size":"8.5px",
fill:"#FFFFFF"});p.resetIgnore();if(f(k.PCPT)){for(q=0;q<k.hours.length;q++)1!=k.PCPT[q]&&p.setIgnore(q);p.setLimits(.3);p.bar(n,.25,{fill:"#77F0FF"});p.setLimits(1);p.numbers(n,{offset_v:-8,round:1},{"font-size":"8.5px",fill:"#0000FF"})}p.resetIgnore()}k.TMPE?(h=k.TMPE,s="TMPE"):k.TMP&&(h=k.TMP,s="TMP");n=w(s);q=D(s);k.WCHILL&&(q=D("WCHILL"));p.setFloatingYRange(30,10,n,q,3,3);p.setLimits();p.setXVals(k.hours);n="TMPgradient"+A;p.linearGradientV(n,WgColors.temp);k.WCHILL&&(p.circles(k.WCHILL,7,{fill:"url(#"+
n+")",stroke:"black",strokeWidth:.8,"stroke-dasharray":"3,3"}),q=ca("WCHILL"),p.numbers(k.WCHILL,{offset_v:-4,print_vals:q},{opacity:.5}));p.setLimits();h&&(p.line(h,.8),p.circles(h,7,{fill:"url(#"+n+")",stroke:"black",strokeWidth:.8}),q=ca(s),p.numbers(h,{offset_v:-4,print_vals:q}));3>D(s)&&-3<w(s)&&p.gridLineH(0,{fill:"none",stroke:"#77F0FF",strokeWidth:1,opacity:1,"stroke-dasharray":"3,3"});k.HTSGW&&(p=new WgSvg.Graph(b,{px_position:[0,200+r],px_dimensions:[g,m],px_padding:[0,30,0,0]}),p.setRange([c,
e],[0,m/25]),p.setXVals(k.hours),n="HTSGWgradient"+A,p.linearGradientV(n,WgColors.htsgw),p.area(k.HTSGW,.8,{fill:"url(#"+n+")",stroke:"none",opacity:.8}),p.line(k.HTSGW,.8,{strokeWidth:1.5}),q=ca("HTSGW"),p.numbers(k.HTSGW,{offset_v:4,skip:1,print_vals:q},{"font-size":"10px"}),p.arrows(k.DIRPW,k.HTSGW,{offset_v:-7,offset_h:0,round:0}),k.PERPW&&(p.setRange([c,e],[0,m/8]),p.line(k.PERPW,.8,{stroke:"#FF0000",strokeWidth:1.5,"stroke-dasharray":"3,3"}),p.numbers(k.PERPW,{offset_v:4,skip:1,skip_start:1},
{"font-size":"10px",fill:"#FF0000"})),0<r&&p.svg.rect(p.group,-1,m,g+2,r,0,0,{fill:"#FFFFFF",stroke:"white",strokeWidth:0,opacity:.8}));p=new WgSvg.Graph(b,{px_position:[0,225+m+r],px_dimensions:[g,t],px_padding:[0,30,0,0]});p.setRange([c,e],[0,d]);p.gridLinesH([.6,3,7,11,16,21,27,33,40,47,55,64]);p.setXVals(k.hours);n="WINDSPDgradient"+A;p.linearGradientV(n,WgColors.wind);p.legend({fill:"url(#"+n+")",stroke:"#EAEAEA",strokeWidth:1,opacity:1},{width:5,left:5,line_width:20,line_left:0,text_left:12,
text_offset:3,desc_left:27},[.6,3,7,11,16,21,27,33,40,47,55,64],[1,2,3,4,5,6,7,8,9,10,11,12],{"font-size":"10px",opacity:1,"text-anchor":"left"},"Beaufort");p.svg.rect(p.group,-1,t,g+2,25,0,0,{fill:"#FFFFFF",stroke:"white",strokeWidth:0,opacity:.8});k.GUST&&(p.area(k.GUST,.8,{fill:"url(#"+n+")",stroke:"none",opacity:.5}),q=ca("GUST"),p.numbers(k.GUST,{offset_v:4,print_vals:q},{opacity:.5}));k.WINDSPD&&(p.area(k.WINDSPD,.8,{fill:"url(#"+n+")",stroke:"none",opacity:.8}),p.line(k.WINDSPD,.8,{strokeWidth:1.5}),
q=ca("WINDSPD"),p.numbers(k.WINDSPD,{offset_v:-11,print_vals:q},{"font-size":"10px"}),p.arrows(k.WINDDIR,k.WINDSPD,{offset_v:-17,offset_h:0,round:0}));k.MWINDSPD&&(p.line(k.MWINDSPD,.8,{strokeWidth:1.2,opacity:.5,"stroke-dasharray":"3,3"}),ca("MWINDSPD"));la(p,g)}else ma(b)},"2d_t":function(a){sa(a,0,5E3)},"2d_t_l":function(a){var b=ya(2E3);sa(a,b[0],b[1])},"2d_w":function(a){ta(a,0,5E3)},"2d_w_l":function(a){var b=ya(2E3);ta(a,b[0],b[1])},forecast:function(a){var b=O();l(a).append(b);l(a).css("overflow",
"hidden");qa()},canvas:function(a){ga.canvas_id="fcst_canvas_"+A;ga.kineticLayer=new Kinetic.Layer;a="canvas";if(!b.custom_onlypro)for(var c=0;c<K.length;c++)for(var e=0;e<P[c].length;e++)P[c][e].draw({drawMethod:a});for(e=c=a=0;e<G.length;e++)a+=G[e].height,G[e].width>c&&(c=G[e].width);a+=(G.length-1)*q.cell_vspace;(new Kinetic.Stage({container:"container_"+A+"_menu_canvas",width:c,height:a})).add(ga.kineticLayer)}},refresh_tabs:{graph:!0,map:!0,"2d_t":!0,"2d_t_l":!0,"2d_w":!0,"2d_w_l":!0},tabs_resize:{forecast:!0,
graph:!0,"2d_t":!0,"2d_t_l":!0,"2d_w":!0,"2d_w_l":!0,canvas:!0},special:{CDC:function(a,b){var c,e,d;(c=M(a,"HCDC","cloud"))||(c=y(Q(k.HCDC[a],"HCDC"),WgColors.cloud.getRGB(k.HCDC[a]),"",F("CDC",a)));(e=M(a,"MCDC","cloud"))||(e=y(Q(k.MCDC[a],"MCDC"),WgColors.cloud.getRGB(k.MCDC[a]),"",F("CDC",a)));(d=M(a,"LCDC","cloud"))||(d=y(Q(k.LCDC[a],"LCDC"),WgColors.cloud.getRGB(k.LCDC[a]),"",F("CDC",a)));return'<td style="padding:0px !important;"><table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: separate !important; width:100% !important; border-spacing: 0px !important; background-color:#ffffff !important" class="wgfcst-forecast"><tr>'+
c+"</tr><tr>"+e+"</tr><tr>"+d+"</tr></table></td>"},SLP:function(a,b){var e;var d;e=(d=M(a,"SLP","press"))?d:1E3<=k.SLP[a]?y('<span style="font-weight:bold !important;">'+c(k.SLP[a]-1E3,0)+"</span>",WgColors.press.getRGB(k.SLP[a]),"",F("SLP",a)):y(k.SLP[a],WgColors.press.getRGB(k.SLP[a]),"",F("SLP",a));return e},FLHGT:function(a,b){return z(a,b)},FLHGTT:function(a,b){return z(a,b)},SMER:function(a,b){return R(a,"WINDDIR")},WAVEDIR:function(a,b){return R(a,"DIRPW")},WAVESMER:function(a,b){return R(a,
"WAVEDIR")},DIRPW:function(a,b){return R(a,"DIRPW")},SWDIR1:function(a,b){return R(a,"SWDIR1")},SWDIR2:function(a,b){return R(a,"SWDIR2")},WVDIR:function(a,b){return R(a,"WVDIR")},APCPs:function(a,b){return B(a,"APCP")},APCP1s:function(a,b){return B(a,"APCP1")},RATING:function(a,b){var c;var e;aa(a,b)?c=y("-","#FFFFFF"):(e=k[b][a],c=0>e?"b":"",e=Math.abs(e),c=1==e?'<td class="wgfcst-wgrating"><img src="'+u.path_img+c+'1rstar.gif" width="19" height="18"/></td>':2==e?'<td class="wgfcst-wgrating"><img src="'+
u.path_img+c+'2rstar.gif" width="19" height="31"/></td>':3==e?'<td class="wgfcst-wgrating"><img src="'+u.path_img+c+'3rstar.gif" width="19" height="44"/></td>':'<td class="wgfcst-wgrating">&nbsp;</td>');return c}},specialCanvas:{},calculate:{WCHILL:function(){var a,b;k.WCHILL=[];f(k.MWINDSPD)?a=k.MWINDSPD:f(k.WINDSPD)&&(a=k.WINDSPD);f(k.TMPE)?b=k.TMPE:f(k.TMP)&&(b=k.TMP);for(var c=0;c<k.hours.length;c++){var g=k.WCHILL,l=c,h;if(a&&b){h=b[c];var s=a[c];e(h)||e(s)?h=null:(s=d(s,"kmh"),h=10<h||4.8>s?
null:13.12+.6215*h-11.37*Math.pow(s,.16)+.3965*h*Math.pow(s,.16))}else h=null;g[l]=h}},MWINDSPD:function(){return x()},RATING:function(){var a,b;f(k.MWINDSPD)?a=k.MWINDSPD:f(k.WINDSPD)&&(a=k.WINDSPD);f(k.TMPE)?b=k.TMPE:f(k.TMP)&&(b=k.TMP);if(a&&b){k.RATING=[];for(var c=0;c<k.hours.length;c++){var e=k.RATING,d=c,g;if(a&&b){g=a[c];var l=0;g>u.limit1&&(l=1);g>u.limit2&&(l=2);g>u.limit3&&(l=3);Math.round(b[c])<u.tlimit&&(l=-l);g=l}else g=null;e[d]=g}}}},legend_click_function:{MWINDSPD:function(a){za(a)}},
unit_type:{WINDSPD:"wind",MWINDSPD:"wind",GUST:"wind",TMPE:"temp",TMP:"temp",WCHILL:"temp",HTSGW:"wave",SWELL1:"wave",SWELL2:"wave",WVHGT:"wave"},colors:{WINDSPD:"wind",MWINDSPD:"wind",GUST:"wind",TMPE:"temp",TMP:"temp",WCHILL:"temp",TCDC:"cloud",MCDC:"cloud",HCDC:"cloud",LCDC:"cloud",RH:"rh",SLP:"press",HTSGW:"htsgw",SWELL1:"htsgw",SWELL2:"htsgw",WVHGT:"htsgw",PERPW:"perpw",SWPER1:"perpw",SWPER2:"perpw",WVPER:"perpw",APCP:"precip",APCP1:"precip1"},minval:{TCDC:5,MCDC:5,HCDC:5,LCDC:5,HTSGW:.3,SWELL1:.3,
SWELL2:.3,WVHGT:.2,APCP:.3,APCP1:.1},minval_depend:{DIRPW:"HTSGW",SWDIR1:"SWELL1",SWDIR2:"SWELL2",WVDIR:"WVHGT",PERPW:"HTSGW",SWPER1:"SWELL1",SWPER2:"SWELL2",WVPER:"WVHGT"},minval_bgcolor_depend:{PERPW:1,SWPER1:1,SWPER2:1,WVPER:1},bold:{HTSGW:3,SWELL1:3,SWELL2:3,WVHGT:3,PERPW:10,SWPER1:10,SWPER2:10,WVPER:10,WINDSPD:11,MWINDSPD:11,GUST:11},precision:{HTSGW:1,SWELL1:1,SWELL2:1,WVHGT:1,PERPW:0,SWPER1:0,SWPER2:0,WVPER:0,APCP:1,APCP1:1,WINDSPD:0,GUST:0,MWINDSPD:0,WCHILL:0,TMPE:0,TMP:0},cell_width_default:20,
cell_height_default:18,cell_height:{RATING:40,CDC:50},cell_hspace:1,cell_vspace:1,legend_width:100,table_width:1E3,precision_units:{ft:0,msd:1},config_default:{path_img:"/int/img/",path_lng:"/int/",svg_allow:!0,fcst_maps:!0,params:"WINDSPD GUST SMER TMPE FLHGT CDC APCPs".split(" "),tabs:!0,wg_logo:!1,link_new_window:!1,first_row:!0,spotname:!0,custom_user_link:!0,options_link:!0,first_row_minfo:!1,first_row_mwinfo:!1,last_row:!0,lat_lon:!0,tz:!0,sun:!0,sst:!0,link_detail:!0,link_archive:!0,link_tides:!0,
link_link:!0,wj:"knots",tj:"c",waj:"m",odh:3,doh:22,wrap:40,fhours:180,limit1:10.63,limit2:15.57,limit3:19.41,tlimit:10,model_link:!0,tooltips:!0,table_layout:"auto","void":0}},K=[],P=[],G=[],k=b.fcst?b.fcst[b.id_model]:{},W={},pa,ka=[],U,fa,ra,Z,na={},u={};this.config=u;for(var J in q.config_default)u[J]=q.config_default[J];(function(a){if(a){for(var b in a)u[b]=a[b];f(a.lang)&&(na=a.lang);f(a.wj)&&(q.current_units.wind=a.wj);f(a.tj)&&(q.current_units.temp=a.tj);f(a.waj)&&(q.current_units.wave=a.waj);
u.odh=parseInt(u.odh);u.doh=parseInt(u.doh);u.fhours=parseInt(u.fhours);u.wrap=parseInt(u.wrap);u.limit1=parseFloat(u.limit1);u.limit2=parseFloat(u.limit2);u.limit3=parseFloat(u.limit3);u.tlimit=parseFloat(u.tlimit)}})(t);var A=h();this.table_id=A;u.targetblank="";u.link_new_window&&(u.targetblank=' target="_blank"');var X=u.params,V={};if(!b.error){J=l.inArray("MWINDSPD",X);-1==J||k.modifikace||X.splice(J,1);var oa=colcounter2=0;for(J=0;J<k.hours.length;J++)da(J)&&oa++;if(u.wrap<oa){var Ea=Math.ceil(oa/
2);for(J=0;J<k.hours.length;J++)if(da(J)&&colcounter2++,colcounter2==Ea){K[0]=[0,J+1];K[1]=[K[0][1],k.hours.length];break}}else K[0]=[0,k.hours.length];J=oa;colcounter2&&(J=colcounter2);q.table_width=J*(q.cell_width_default+3)+q.legend_width+3+1;for(var Da in q.unit_type)ka[q.unit_type[Da]]=q.current_units[q.unit_type[Da]];for(J=0;J<X.length;J++)if(q.calculate[X[J]])q.calculate[X[J]](k);ha()}this.aktivujTab=function(a){W[a]&&W[a].aktivuj()};this.write=function(a){a=ia(a);document.write(a);qa()};this.insertInto=
function(a,b){var c=ia(b);l(a).append(c);qa()};this.switchUnits=function(a){var b=q.unit_type[a],c=ka[b];c&&(c=l.inArray(c,q.unit[b]),ka[b]=q.unit[b][c+1]?q.unit[b][c+1]:q.unit[b][0]);for(b=0;b<G.length;b++)if(q.unit_type[G[b].param]&&q.unit_type[G[b].param]==q.unit_type[a]){var c=G[b],e=(new m(G[b].param,G[b].sada,K[G[b].sada][0],K[G[b].sada][1])).getHtml();l("#"+c.id).replaceWith(e)}};this.showMap=function(a){if(v.WgUtil){var c=b.fcst[b.id_model],e=l(window).scrollTop();Z||(Z=WgUtil.wgWindow({close:"content",
handle:!0,handle_txt:'<span style="font-weight:bold !important;">'+c.model_name+"</span>"}),Z.css("top",e+10));Z.ajaxLoad(u.path_lng+a,function(){Z.find(".loadedimg").load(function(){WgUtil.fitBrowser(Z);if(l.browser.msie&&9>parseFloat(l.browser.version)){var a=Z.find(".loadedimg").width();Z.width(a+6)}})});Z.show()}};this.setModificationStr=function(a){var c,e=a.split(":");2==e.length&&(a=e[1],c=e[0]);a=a.split(",");16==a.length?(e=b.fcst[b.id_model],e.modifikace={koef:a},c&&(e.id_modifikace=c),
x(e),-1==l.inArray("MWINDSPD",X)&&(a=l.inArray("WINDSPD",X),X.splice(a,0,"MWINDSPD")),Ba("MWINDSPD"),Ca("GUST")?Aa("GUST","MWINDSPD"):Ca("WINDSPD")&&Aa("WINDSPD","MWINDSPD")):Ba("MWINDSPD")}}function d(a,b,c){return e(a)?"-":WgUtil.unitConvert(a,b,c)}function c(a,b){b||(b=0);var c=Math.pow(10,b);a=0==c?Math.round(a):Math.round(c*a)/c;var c=a.toString(),e=c.indexOf(".");return-1==e?c:c.substring(0,e+b+1)}function e(a){return""===a||null===a||"_"===a?!0:!1}function f(a){return"undefined"!==typeof a?
!0:!1}function g(){l(function(){l(".wgfcst-tooltip").tooltip({bodyHandler:function(){return'<div style="width:200px !important">'+l(this).attr("name")+"</div>"}})})}function h(){var a=0,b;for(b in WgFcst.forecasts)a++;return"tabid_"+a}function n(a,b,c){b.q=a;c=WgUtil.updateObject(c,{onerror:function(){},callback:function(){}});l.getJSON("/int/iapi.php",b,function(a){if("error"==a["return"])c.onerror(a);else c.callback(a)})}var v={};v.WgUtil="undefined"!=typeof WgUtil?!0:!1;var m,l=jQuery;forecasts=
{};var r=a();return{version:"1.0",forecasts:{},showForecast:function(a,c,e){c=c||{};!c.lang&&WgLang&&(c.lang=WgLang);!c.params&&a.default_vars&&(c.params=a.default_vars[a.id_model]);a=new b(a,c);c=!0;2==a.config.vt&&(c=!1);e?a.insertInto(document.getElementById(e),c):a.write(c);2==a.config.vt&&a.aktivujTab("graph");return WgFcst.forecasts[a.table_id]=a},loadForecast:function(a,b,c,e){c=c||{};WgFcst.loadData(a,function(a){l("#"+b).empty();WgFcst.showForecast(a,c,b)},e||function(){})},loadData:function(a,
b,c){a=a||{};var e="wforecast_latlon";a.id_spot&&(e="wforecast");n(e,a,{callback:b,onerror:c||function(){}})},showMap:function(a,b){WgFcst.forecasts[a].showMap(b)},switchUnits:function(a,b){WgFcst.forecasts[a].switchUnits(b);WgFcst.forecasts[a].config.tooltips&&g()},setModificationStr:function(a,b){WgFcst.forecasts[a].setModificationStr(b)},makeDirSVG:function(a){var b=parseInt(l(this).attr("alt")),b=a.group({transform:"scale(0.2) rotate("+(b+180)+",50,50) translate(0,5)"});m||(m=a.createPath(),m.move([[50,
0],[-20,30],[16,-3],[-3,63],[14,0],[-3,-63],[16,3],[-20,-30]],!0).close());a.path(b,m,{fill:"black",strokeWidth:0})},makeTooltips:function(){g()},svgGraphHelp:function(){WgUtil.wgWindow({close:"content",handle:!0,mousepos:!0,width:"740px",height:"670px",handle_txt:'<span style="font-weight:bold !important;">WG forecast graph legend</span>',html:'<img alt="WG forecast graph example" src="../images/wg_graph_legend-wave.png"/>'})},svgGraphWaveHelp:function(){WgUtil.wgWindow({close:"content",handle:!0,
mousepos:!0,width:"300px",height:"200px",handle_txt:'<span style="font-weight:bold !important;">WG wave forecast graph legend</span>',html:"<h3>Under construction!</h3><p>Wave model graphs are not final yet...</p>"})}}}();if(!WgColors)var WgColors={};WgColors.wind=new WgPalette([[0,255,255,255],[5,255,255,255],[8.9,103,247,241],[13.5,0,255,0],[18.8,255,240,0],[24.7,255,50,44],[31.7,255,10,200],[38,255,0,255],[45,150,50,255],[60,60,60,255],[70,0,0,255]]);
WgColors.temp=new WgPalette([[-25,80,255,220],[-15,171,190,255],[0,255,255,255],[10,255,255,100],[20,255,170,0],[30,255,50,50],[35,255,0,110],[40,255,0,160]]);WgColors.cloud=new WgPalette([[0,255,255,255],[100,135,135,135]]);WgColors.precip=new WgPalette([[0,255,255,255],[9,115,115,255]]);WgColors.precip1=new WgPalette([[0,255,255,255],[3,115,115,255]]);WgColors.htsgw=new WgPalette([[0,255,255,255],[.3,255,255,255],[4,120,120,255],[10,255,80,100],[15,255,200,100]]);
WgColors.perpw=new WgPalette([[0,255,255,255]]);WgColors.press=new WgPalette([[0,80,255,220],[900,80,255,220],[1E3,255,255,255],[1070,115,115,255],[1200,115,115,255]]);WgColors.rh=new WgPalette([[0,171,190,255],[50,255,255,255],[100,255,255,0]]);
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function b(c,e){var d=function(){},d={autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:b.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:d,onSearchComplete:d,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",lookupFilter:function(a,b,c){return-1!==
a.value.toLowerCase().indexOf(c)},paramName:"query",transformResult:function(b){return"string"===typeof b?a.parseJSON(b):b},keepText:!1};this.element=c;this.el=a(c);this.suggestions=[];this.badQueries=[];this.selectedIndex=-1;this.currentValue=this.element.value;this.intervalId=0;this.cachedResponse=[];this.onChange=this.onChangeInterval=null;this.isLocal=this.ignoreValueChange=!1;this.suggestionsContainer=null;this.options=a.extend({},d,e);this.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"};
this.initialize();this.setOptions(e)}var d=function(){return{extend:function(b,e){return a.extend(b,e)},createNode:function(a){var b=document.createElement("div");b.innerHTML=a;return b.firstChild}}}();b.utils=d;a.Autocomplete=b;b.formatResult=function(a,b){var d="("+b.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g"),"\\$1")+")";return a.value.replace(new RegExp(d,"gi"),"<strong>$1</strong>")};b.prototype={killerFn:null,initialize:function(){var c=this,e="."+c.classes.suggestion,
d=c.classes.selected,g=c.options,h;c.element.setAttribute("autocomplete","off");c.killerFn=function(b){0===a(b.target).closest("."+c.options.containerClass).length&&(c.killSuggestions(),c.disableKillerFn())};g.width&&"auto"!==g.width||(g.width=c.el.outerWidth());c.suggestionsContainer=b.utils.createNode('<div class="'+g.containerClass+'" style="position: absolute; display: none;"></div>');h=a(c.suggestionsContainer);h.appendTo(g.appendTo).width(g.width);h.on("mouseover.autocomplete",e,function(){c.activate(a(this).data("index"))});
h.on("mouseout.autocomplete",function(){c.selectedIndex=-1;h.children("."+d).removeClass(d)});h.on("click.autocomplete",e,function(){c.select(a(this).data("index"),!1)});c.fixPosition();if(window.opera)c.el.on("keypress.autocomplete",function(a){c.onKeyPress(a)});else c.el.on("keydown.autocomplete",function(a){c.onKeyPress(a)});c.el.on("keyup.autocomplete",function(a){c.onKeyUp(a)});c.el.on("blur.autocomplete",function(){c.onBlur()});c.el.on("focus.autocomplete",function(){c.fixPosition()})},onBlur:function(){this.enableKillerFn()},
setOptions:function(b){var e=this.options;d.extend(e,b);if(this.isLocal=a.isArray(e.lookup))e.lookup=this.verifySuggestionsFormat(e.lookup);a(this.suggestionsContainer).css({"max-height":e.maxHeight+"px",width:e.width+"px","z-index":e.zIndex})},clearCache:function(){this.cachedResponse=[];this.badQueries=[]},clear:function(){this.clearCache();this.currentValue=null;this.suggestions=[]},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},fixPosition:function(){var b;"body"===this.options.appendTo&&
(b=this.el.offset(),a(this.suggestionsContainer).css({top:b.top+this.el.outerHeight()+"px",left:b.left+"px"}))},enableKillerFn:function(){a(document).on("click.autocomplete",this.killerFn)},disableKillerFn:function(){a(document).off("click.autocomplete",this.killerFn)},killSuggestions:function(){var a=this;a.stopKillSuggestions();a.intervalId=window.setInterval(function(){a.hide();a.stopKillSuggestions()},300)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},onKeyPress:function(a){if(!this.disabled&&
!this.visible&&40===a.keyCode&&this.currentValue)this.suggest();else if(!this.disabled&&this.visible){switch(a.keyCode){case 27:this.el.val(this.currentValue);this.hide();break;case 9:case 13:if(-1===this.selectedIndex){this.hide();return}this.select(this.selectedIndex,13===a.keyCode);if(9===a.keyCode&&!1===this.options.tabDisabled)return;break;case 38:this.moveUp();break;case 40:this.moveDown();break;default:return}a.stopImmediatePropagation();a.preventDefault()}},onKeyUp:function(a){var b=this;
if(!b.disabled){switch(a.keyCode){case 38:case 40:return}clearInterval(b.onChangeInterval);if(b.currentValue!==b.el.val())if(0<b.options.deferRequestBy)b.onChangeInterval=setInterval(function(){b.onValueChange()},b.options.deferRequestBy);else b.onValueChange()}},onValueChange:function(){var a;clearInterval(this.onChangeInterval);this.currentValue=this.element.value;a=this.getQuery(this.currentValue);this.selectedIndex=-1;this.ignoreValueChange?this.ignoreValueChange=!1:a.length<this.options.minChars?
this.hide():this.getSuggestions(a)},getQuery:function(b){var e=this.options.delimiter;if(!e)return a.trim(b);b=b.split(e);return a.trim(b[b.length-1])},getSuggestionsLocal:function(b){var e=b.toLowerCase(),d=this.options.lookupFilter;return{suggestions:a.grep(this.options.lookup,function(a){return d(a,b,e)})}},getSuggestions:function(b){var e,d=this,g=d.options,h=g.serviceUrl;(e=d.isLocal?d.getSuggestionsLocal(b):d.cachedResponse[b])&&a.isArray(e.suggestions)?(d.suggestions=e.suggestions,d.suggest()):
d.isBadQuery(b)||(g.params[g.paramName]=b,!1!==g.onSearchStart.call(d.element,g.params)&&(a.isFunction(g.serviceUrl)&&(h=g.serviceUrl.call(d.element,b)),a.ajax({url:h,data:g.ignoreParams?null:g.params,type:g.type,dataType:g.dataType}).done(function(a){d.processResponse(a,b);g.onSearchComplete.call(d.element,b)})))},isBadQuery:function(a){for(var b=this.badQueries,d=b.length;d--;)if(0===a.indexOf(b[d]))return!0;return!1},hide:function(){this.visible=!1;this.selectedIndex=-1;a(this.suggestionsContainer).hide()},
suggest:function(){if(0===this.suggestions.length)this.hide();else{var b=this.options.formatResult,e=this.getQuery(this.currentValue),d=this.classes.suggestion,g=this.classes.selected,h=a(this.suggestionsContainer),n="";a.each(this.suggestions,function(a,g){var l="";g.g&&(l=" autocomplete-g"+g.g);n+='<div class="'+d+l+'" data-index="'+a+'">'+b(g,e)+"</div>"});h.html(n).show();this.visible=!0;this.options.autoSelectFirst&&(this.selectedIndex=0,h.children().first().addClass(g))}},verifySuggestionsFormat:function(b){return b.length&&
"string"===typeof b[0]?a.map(b,function(a){return{value:a,data:null}}):b},processResponse:function(a,b){var d=this.options,g=d.transformResult(a,b);g.suggestions=this.verifySuggestionsFormat(g.suggestions);d.noCache||(this.cachedResponse[g[d.paramName]]=g,0===g.suggestions.length&&this.badQueries.push(g[d.paramName]));b===this.getQuery(this.currentValue)&&(this.suggestions=g.suggestions,this.suggest())},activate:function(b){var d=this.classes.selected,f=a(this.suggestionsContainer),g=f.children();
f.children("."+d).removeClass(d);this.selectedIndex=b;return-1!==this.selectedIndex&&g.length>this.selectedIndex?(b=g.get(this.selectedIndex),a(b).addClass(d),b):null},select:function(a,b){var d=this.suggestions[a];d&&(this.el.val(d),this.ignoreValueChange=b,this.hide(),this.onSelect(a))},moveUp:function(){-1!==this.selectedIndex&&(0===this.selectedIndex?(a(this.suggestionsContainer).children().first().removeClass(this.classes.selected),this.selectedIndex=-1,this.el.val(this.currentValue)):this.adjustScroll(this.selectedIndex-
1))},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(b){var d=this.activate(b),f,g;d&&(d=d.offsetTop,f=a(this.suggestionsContainer).scrollTop(),g=f+this.options.maxHeight-25,d<f?a(this.suggestionsContainer).scrollTop(d):d>g&&a(this.suggestionsContainer).scrollTop(d-this.options.maxHeight+25),this.options.keepText||this.el.val(this.getValue(this.suggestions[b].value)))},onSelect:function(b){var d=this.options.onSelect;
b=this.suggestions[b];this.el.val(this.getValue(b.value));a.isFunction(d)&&d.call(this.element,b)},getValue:function(a){var b=this.options.delimiter,d;if(!b)return a;d=this.currentValue;b=d.split(b);return 1===b.length?a:d.substr(0,d.length-b[b.length-1].length)+a},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete");this.disableKillerFn();a(this.suggestionsContainer).remove()}};a.fn.autocompleteWG=function(c,d){return 0===arguments.length?this.first().data("autocomplete"):this.each(function(){var f=
a(this),g=f.data("autocomplete");if("string"===typeof c){if(g&&"function"===typeof g[c])g[c](d)}else g&&g.dispose&&g.dispose(),g=new b(this,c),f.data("autocomplete",g)})}});if(!WgLang)var WgLang={};
var WgComplete={qspot:function(a,b){var d=$("#"+a);b=WgUtil.updateObject(b,{width:350,all:!1,favourite:!0,start_favourite:!0,custom:!0,start_custom:!0,start_last:5,priority_sort:!0,min_chars:3,delay:300,max_height:380,hint:WgUtil.getLangText("spotmenu","qs_hint"),api:"/int/iapi.php",last_spots:[],id_user:0,on_select:function(a){},on_unselect:function(){}});var c=null,e={},f="",g={},h=function(a,c){var d=$.Autocomplete.formatResult(a,c),e="",f="xw";0<=a.type.indexOf("W")&&0<=a.type.indexOf("F")&&(f=
"xf");0<=a.type.indexOf("c")&&(f="xco");0<=a.type.indexOf("c")&&0<=a.type.indexOf("F")&&(f="xcof");0<=a.type.indexOf("C")&&(f="xc");0<=a.type.indexOf("L")&&(e+=" autocomplete-lastspot");var g=a.type.indexOf("g");0<=g&&(e+=" autocomplete-g"+a.type.substring(g+1,g+2));0<=a.type.indexOf("_")&&(e+=" autocomplete-nextgroup");return'<div class="autocomplete-suggestion-item autocomplete-spot-'+f+e+'"><div class="autocomplete-suggestion-spot" style="width:'+(b.width-45)+'px">'+d+"</div></div>"},n=function(a,
l){f=a;if(a.length<b.min_chars)if(c)v(c);else{var h={q:"autocomplete_spots",type_info:!0,my:1,all:0,favourite:b.start_favourite?1:0,custom:b.start_custom?1:0,priority_sort:b.priority_sort?1:0,last:b.start_last?b.start_last:0,id_user:b.id_user?b.id_user:0};b.last_spots.length&&(h.last_spots=b.last_spots.join("_"));$.getJSON(b.api+"?callback=?",h,function(a){c=a.suggestions;v(c)})}else e[a]?v(e[a]):(h={q:"autocomplete_spots",type_info:!0,all:b.all?1:0,favourite:b.favourite?1:0,custom:b.custom?1:0,priority_sort:b.priority_sort?
1:0,last:b.start_last?b.start_last:0,id_user:b.id_user?b.id_user:0,query:d.val()},clearTimeout(g),g=setTimeout(function(){b.last_spots.length&&(h.last_spots=b.last_spots.join("_"));$.getJSON(b.api+"?callback=?",h,function(b){e[a]=b.suggestions;v(e[a])})},b.delay))},v=function(a){a=d.autocompleteWG({lookup:a,deferRequestBy:0,formatResult:h,width:b.width,onSelect:b.on_select,autoSelectFirst:!0,maxHeight:b.max_height,keepText:!0});d.autocompleteWG().getSuggestions(d.val());return a};d.one("focus",function(){d.val("");
n(d.val());d.on("focus",function(){b.on_unselect();n(d.val())});d.on("keyup",function(a){d.val()!==f&&n(d.val())})})},qstation:function(a,b){var d=$("#"+a);b=WgUtil.updateObject(b,{width:350,all:!1,favourite:!0,start_favourite:!0,custom:!0,start_custom:!0,start_last:5,priority_sort:!0,min_chars:2,delay:300,max_height:380,api:"/int/iapi.php",last_stations:[],on_select:function(a){},on_unselect:function(){}});var c=null,e={},f="",g={},h=WgUtil.supportsSVG(),n=function(a,c){var d=$.Autocomplete.formatResult(a,
c),e="",f="xw";0<=a.type.indexOf("O")&&(f="xo");h&&(f+="-svg");0<=a.type.indexOf("L")&&(e+=" autocomplete-lastspot");var g=a.type.indexOf("g");0<=g&&(e+=" autocomplete-g"+a.type.substring(g+1,g+2));0<=a.type.indexOf("_")&&(e+=" autocomplete-nextgroup");return'<div class="autocomplete-suggestion-item autocomplete-station-'+f+e+'"><div class="autocomplete-suggestion-station" style="width:'+(b.width-45)+'px">'+d+"</div></div>"},v=function(a,h){f=a;if(a.length<b.min_chars)if(c)m(c);else{var s={q:"autocomplete_stations",
type_info:!0,my:1,all:0,priority_sort:b.priority_sort?1:0,last:b.start_last?b.start_last:0};b.last_stations.length&&(s.last_stations=b.last_stations.join("_"));$.getJSON(b.api+"?callback=?",s,function(a){c=a.suggestions;m(c)})}else e[a]?m(e[a]):(s={q:"autocomplete_stations",type_info:!0,all:1,priority_sort:b.priority_sort?1:0,query:d.val()},clearTimeout(g),g=setTimeout(function(){$.getJSON(b.api+"?callback=?",s,function(b){e[a]=b.suggestions;m(e[a])})},b.delay))},m=function(a){a=d.autocompleteWG({lookup:a,
deferRequestBy:0,formatResult:n,width:b.width,onSelect:b.on_select,autoSelectFirst:!0,maxHeight:b.max_height,keepText:!0});d.autocompleteWG().getSuggestions(d.val());return a};d.one("focus",function(){d.val("");v(d.val());d.on("focus",function(){v(d.val())});d.on("keyup",function(a){d.val()!==f&&v(d.val())})})}},WgLib=function(){function a(a,b,c){b=document.createElement("DIV");b.innerHTML=a;b.style.margin="5px";b.style.textDecoration="none";b.style.color="#000000";b.style.backgroundColor="#FFFFF0";
b.style.font="small Arial";b.style.fontWeight="bold";b.style.border="1px solid black";b.style.padding="2px";b.style.textAlign="center";b.style.cursor="pointer";google.maps.event.addDomListener(b,"click",function(){c()});return b}function b(a,b){if(b)for(var c=0;c<b.length;c++)WgUtil.addOpt(a,b[c][0],b[c][1],a.options.length)}function d(a,b){return WgUtil.getLangText(a,b)}function c(a,b){b||(b=function(){});navigator.geolocation&&navigator.geolocation.getCurrentPosition(a,b)}function e(){var a={};
a.image=new google.maps.MarkerImage("/images/markers-v3/image.png",new google.maps.Size(29,30),new google.maps.Point(0,0),new google.maps.Point(15,30));a.shadow=new google.maps.MarkerImage("/images/markers-v3/shadow.png",new google.maps.Size(47,30),new google.maps.Point(0,0),new google.maps.Point(15,30));a.shape={coord:[20,0,23,1,24,2,26,3,27,4,27,5,28,6,28,7,24,8,25,9,25,10,26,11,26,12,26,13,26,14,25,15,25,16,25,17,24,18,23,19,22,20,20,21,19,22,18,23,17,24,16,25,15,26,15,27,15,28,14,29,14,29,13,
28,13,27,12,26,11,25,11,24,9,23,8,22,7,21,5,20,3,19,2,18,1,17,0,16,0,15,0,14,4,13,3,12,3,11,2,10,2,9,2,8,2,7,3,6,3,5,4,4,4,3,5,2,7,1,9,0,20,0],type:"poly"};return a}var f={};this.langdir=d("langdir","dir");var g=function(){return"undefined"===typeof google||"undefined"===typeof google.maps?!1:!0},h=function(a){function c(e,f){var g;g=h.id_georegion.val();f&&f.id_georegion&&(g=f.id_georegion);$.getJSON("/int/ajax/wg_ajax_json_select.php",{q:"zeme",id_georegion:g,exist_spots:a.exist_spots,id_model:a.id_model},
function(a){h.id_zeme[0].length=0;WgUtil.addOpt(h.id_zeme[0],-1,"--"+d("spotmenu","sel_zeme")+"-- ("+a.count+" "+d("spotmenu","num_zeme")+")",0);WgUtil.addOpt(h.id_zeme[0],0,"--"+d("spotmenu","sel_all")+"--");b(h.id_zeme[0],a.zeme);WgUtil.isDefined(e)&&(h.id_zeme[0].value=e)})}function e(c,f){var r,s,t;r=h.id_region.val();s=h.id_zeme.val();t=h.id_georegion.val();var v=g();f&&(f.id_region&&(r=f.id_region),f.id_zeme&&(s=f.id_zeme),f.id_georegion&&(t=f.id_georegion));$.getJSON("/int/ajax/wg_ajax_json_select.php",
{q:"spots",id_zeme:s,id_region:r,id_georegion:t,cats:v,id_cuser:a.id_cuser,id_model:a.id_model,special:a.special,opt:a.opt},function(a){h.id_spot[0].length=0;WgUtil.addOpt(h.id_spot[0],0,"--"+d("spotmenu","sel_spot")+"-- ("+a.count+" "+d("spotmenu","num_spot")+")",0);b(h.id_spot[0],a.spots);WgUtil.isDefined(c)&&(h.id_spot[0].value=c);var e=Array(h.id_spot[0].length);for(i=0;i<e.length;i++)e[i]=new Option(h.id_spot[0][i].text,h.id_spot[0][i].value);m=e;n&&n.addMapSpots(a.spots)})}function f(a,c){var e,
g;e=h.id_zeme.val();g=h.id_georegion.val();c&&(c.id_zeme&&(e=c.id_zeme),c.id_georegion&&(g=c.id_georegion));$.getJSON("/int/ajax/wg_ajax_json_select.php",{q:"regions",id_zeme:e,id_georegion:g},function(c){h.id_region[0].length=0;WgUtil.addOpt(h.id_region[0],0,"--"+d("spotmenu","sel_all")+"-- ("+c.count+" "+d("spotmenu","num_reg")+")",0);b(h.id_region[0],c.regions);WgUtil.isDefined(a)&&(h.id_region[0].value=a)})}function g(){for(var a=D.find(".typspots").find("input:checked"),b=[],c=0;c<a.length;c++)b[c]=
a[c].value;return b.join("_")}var h={},m=[],n,v=this,D=$("#"+a.spot_select);this.id=a.spot_select;h.id_georegion=D.find(".id_georegion");h.id_zeme=D.find(".id_zeme");h.id_region=D.find(".id_region");h.id_spot=D.find(".id_spot");h.filter=D.find(".filter_search");h.refresh=D.find(".spot_refresh");WgUtil.isDefined(a.exist_spots)||(a.exist_spots=1);WgUtil.isDefined(a.id_model)||(a.id_model=0);WgUtil.isDefined(a.id_cuser)||(a.id_cuser=0);WgUtil.isDefined(a.opt)||(a.opt="");WgUtil.isDefined(a.special)||
(a.special="");WgUtil.isDefined(a.spotmap)&&(n=a.spotmap,n.setSpotSelect(this));WgUtil.addOpt(h.id_zeme[0],0,"--"+d("spotmenu","sel_zeme")+"-- (0 "+d("spotmenu","num_zeme")+")");WgUtil.addOpt(h.id_region[0],0,"--"+d("spotmenu","sel_all")+"-- (0 "+d("spotmenu","num_reg")+")");WgUtil.addOpt(h.id_spot[0],0,"--"+d("spotmenu","sel_spot")+"-- (0 "+d("spotmenu","num_spot")+")");a.id_georegion&&(h.id_georegion[0].value=a.id_georegion,c(a.id_zeme,a),a.id_zeme&&(f(a.id_region,a),e(a.id_spot,a)));h.id_georegion.change(function(){h.id_region[0].length=
0;h.id_spot[0].length=0;WgUtil.addOpt(h.id_region[0],0,"--"+d("spotmenu","sel_all")+"-- (0 "+d("spotmenu","num_reg")+")");WgUtil.addOpt(h.id_spot[0],0,"--"+d("spotmenu","sel_spot")+"-- (0 "+d("spotmenu","num_spot")+")");c()});h.id_zeme.change(function(){f();e()});h.id_region.change(function(){e()});h.id_spot.change(function(){var a=h.id_spot.val();n&&n.showMapSpot(a)});h.filter.length&&h.filter.keyup(function(){var a=h.id_spot[0];a.options.length=0;var b=h.filter.val().toLowerCase();for(i=0;i<m.length;i++)if(""==
b||0<=m[i].text.toLowerCase().indexOf(b))a.options[a.options.length]=m[i]});h.refresh.length&&h.refresh.click(function(){n&&n.deleteMarkers();e()});this.setMap=function(a){n=a;n.setSpotSelect(v)};this.hideMap=function(){n&&n.hide()};this.selectSpot=function(a,b){WgUtil.optExist(h.id_spot[0],a)||(WgUtil.optExist(h.id_spot[0],-100)||WgUtil.addOpt(h.id_spot[0],-100,"--------------"),WgUtil.addOpt(h.id_spot[0],a,b));h.id_spot[0].value=a}},n=function(b){function c(){if(!this.mcoptions){var a=[45,49,60,
70,80],b=[34,37,45,52,60],d=[];for(i=1;5>=i;++i)d.push({url:"/images/wgmc"+i+".png",height:b[i-1],width:a[i-1]});this.mcoptions={gridSize:45,maxZoom:10,styles:d}}return new MarkerClusterer(w,[],this.mcoptions)}function d(){if(!w&&g()){var b={zoom:3,center:new google.maps.LatLng(20,0),mapTypeId:google.maps.MapTypeId.ROADMAP};w=WgUtil.googleMap(h.id,b);b=a("Reset markers",w,n.resetMarkers);b.index=1;w.controls[google.maps.ControlPosition.RIGHT_TOP].push(b);z=c();e.jqResize(".jqResize").mouseup(function(){google.maps.event.trigger(w,
"resize")})}}var e=$("#"+b),f,h=document.getElementById(b+"_gmap"),n=this,w,S={},D,y,z,B=!1,R={};g()&&(R=new google.maps.InfoWindow({content:""}));this.id=b;this.setPosition=function(){var a=e.offset(),b=$(window).width()-a.left-10,a=$(window).height()-a.top-10;1200<b&&(b=1200);700<a&&(a=700);600>b&&(b=600);300>a&&(a=300);e.width(b);e.height(a);w&&google.maps.event.trigger(w,"resize")};this.setToggleCheckbox=function(a){f=$("#"+a);f.click(function(){"checked"==f.attr("checked")?(e.show(),n.setPosition(),
d(),n.addMapSpots(D)):n.hide()})};this.hide=function(){f&&f.attr("checked",!1);e.hide()};this.isVisible=function(){return e.is(":visible")?!0:!1};this.addMapSpots=function(a){if(WgUtil.isDefined(a)&&(D=a,w&&n.isVisible())){for(var b=[],c,d=[],e=0;e<a.length;e++){var f={id_spot:a[e][0],spotname:a[e][1],lat:a[e][2],lon:a[e][3]};c=new google.maps.LatLng(f.lat,f.lon);b.push(c);if(!S[f.id_spot]){c=m(f,!1);var g;g=B?B(f,{spotselect:y}):v(f,{spotselect:y});c.setInfoWindow({infowindow:R,map:w,content:g});
c.spotselect=y;c.setupClickEvent();S[f.id_spot]=c;S[f.id_spot].spotdef=a[e];d.push(c)}}z.addMarkers(d);if(0<b.length){a=new google.maps.LatLngBounds;for(d=0;d<b.length;d++)a.extend(b[d]);w.fitBounds(a)}}};this.resetMarkers=function(){n.isVisible()&&(n.deleteMarkers(),n.addMapSpots(D))};this.deleteMarkers=function(){w&&(z&&z.clearMarkers(),z=c(),S={})};this.setSpots=function(a){D=a};this.setSpotSelect=function(a){y=a};this.showMapSpot=function(a){w&&n.isVisible()&&(a=S[a])&&(w.setCenter(a.getPosition()),
11>w.getZoom()&&w.setZoom(11),a.openInfoWindow())};this.setMarkerFunction=function(a){B=a}},v=function(a,b){var c;b||(b={});$.isFunction(b.content_function)?c=b.content_function(a):(c='<div style="font-family: arial !important;"><b>'+a.spotname+'</b><br/><br/>[<a  style="font-family: arial !important;" href="/'+langdir+"/index.php?sc="+a.id_spot+'" target="_top">'+d("gmap","link_f")+"</a>]",c+=' [<a style="font-family: arial !important;" href="/'+langdir+"/historie.php?id_spot="+a.id_spot+'" target="_top">'+
d("gmap","link_a")+"</a>]",c+=' [<a style="font-family: arial !important;" href="/'+langdir+"/spot.php?id_spot="+a.id_spot+'" target="_top">'+d("gmap","link_d")+"</a>]",c+="<br/><br/>",b.spotselect instanceof h&&(c+='[<a style="font-family: arial !important;" href="javascript:WgLib.spotSelectHideMap(\''+b.spotselect.id+"');\">"+d("gmap","link_s")+"</a>] "),c+='[<a style="font-family: arial !important;" href="/'+langdir+"/nastaveni.php?cast=fspot&akce=new&odeslano=1&spotid="+a.id_spot+'" target="_top">'+
d("gmap","link_add")+"</a>]</div>");return c},m=function(a,b,c){var d,f,g=e();a.lat&&a.lon&&(d=new google.maps.LatLng(a.lat,a.lon));c||(c={});c.icon||(c.icon=g.image);c.shadow||(c.shadow=g.shadow);c.shape||(c.shape=g.shape);WgUtil.isDefined(c.draggable)||(c.draggable=!1);d&&(c.position=d);b&&(c.map=b);f=new google.maps.Marker(c);f.spot=a;f.spotselect=!1;f.openInfoWindow=function(){f.iw.setContent(f.iwcontent);f.iw.open(f.iwmap,f)};f.setInfoWindow=function(a){a.infowindow?f.iw=a.infowindow:f.iw||(f.iw=
new google.maps.InfoWindow({content:""}));a.content?$.isFunction(a.content)?f.iwcontent=a.content():f.iwcontent=a.content:f.iwcontent||(f.iwcontent=v(f.spot));a.map&&(f.iwmap=a.map)};f.setupClickEvent=function(){google.maps.event.addListener(f,"click",function(){f.spotselect&&f.spotselect.selectSpot(f.spot.id_spot,f.spot.spotname);f.openInfoWindow()})};return f};this.wgCatsStr=function(){var a="";for(i=1;i<=idtyps.length;i++)1==idtyps[i]&&(a+="_"+i);return""!=a?a.substr(1):""};return{spotSelect:function(a){a=
new h(a);return f[a.id]=a},spotSelectHideMap:function(a){f[a]&&f[a].hideMap()},spotMap:function(a,b,c){a=new n(a);a.setPosition();a.setToggleCheckbox(b);c&&a.setMarkerFunction(c);return a},mapIcon:function(){return e()},infoWindow:function(a,b){var c=v(a,b);return new google.maps.InfoWindow({content:c})},mapMarker:function(a,b,c){return m(a,b,c)},mapControl:function(b,c,d){return a(b,c,d)},myPosition:function(a,b){c(a,b)}}}();
(function(a){a.fn.extend({leanModal:function(b){function d(b){a("#lean_overlay").fadeOut(200);a(b).css({display:"none"})}var c=a("<div id='lean_overlay'></div>");a("body").append(c);b=a.extend({position:"",top:100,margin:10,overlay:.5,closeButton:null,clickclose:!1,onshow:function(){}},b);return this.each(function(){var c=b;a(this).click(function(b){var g=a(this).attr("href");a("#lean_overlay").click(function(){d(g)});a(c.closeButton).click(function(){d(g)});c.clickclose&&a(".leanmodal").click(function(){d(g)});
var h=a(g).outerHeight(),n=a(g).outerWidth();a("#lean_overlay").css({display:"block",opacity:0});a("#lean_overlay").fadeTo(200,c.overlay);"center"==c.position?a(g).css({display:"block",position:"fixed",opacity:0,"z-index":11E3,left:"50%",top:"50%","margin-left":-(n/2)+"px","margin-top":-(h/2)+"px"}):a(g).css({display:"block",position:"fixed",opacity:0,"z-index":11E3,left:"50%","margin-left":-(n/2)+"px",top:c.top+"px"});a(g).fadeTo(200,1);a(g).bind("closeModal",function(a){d(g)});b.preventDefault();
c.onshow()})})}})})(jQuery);
(function(a){a.fn.drag=function(b,c,d){var h="string"==typeof b?b:"",n=a.isFunction(b)?b:a.isFunction(c)?c:null;0!==h.indexOf("drag")&&(h="drag"+h);d=(b==n?c:d)||{};return n?this.bind(h,d,n):this.trigger(h)};var b=a.event,d=b.special,c=d.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",livekey:"livedrag",add:function(d){var f=a.data(this,c.datakey),g=d.data||{};f.related+=1;!f.live&&d.selector&&(f.live=!0,b.add(this,"draginit."+c.livekey,
c.delegate));a.each(c.defaults,function(a,b){void 0!==g[a]&&(f[a]=g[a])})},remove:function(){--a.data(this,c.datakey).related},setup:function(){if(!a.data(this,c.datakey)){var d=a.extend({related:0},c.defaults);a.data(this,c.datakey,d);b.add(this,"mousedown",c.init,d);this.attachEvent&&this.attachEvent("ondragstart",c.dontstart)}},teardown:function(){a.data(this,c.datakey).related||(a.removeData(this,c.datakey),b.remove(this,"mousedown",c.init),b.remove(this,"draginit",c.delegate),c.textselect(!0),
this.detachEvent&&this.detachEvent("ondragstart",c.dontstart))},init:function(e){var f=e.data,g;if(!(0<f.which&&e.which!=f.which||a(e.target).is(f.not)||f.handle&&!a(e.target).closest(f.handle,e.currentTarget).length)&&(f.propagates=1,f.interactions=[c.interaction(this,f)],f.target=e.target,f.pageX=e.pageX,f.pageY=e.pageY,f.dragging=null,g=c.hijack(e,"draginit",f),f.propagates))return(g=c.flatten(g))&&g.length&&(f.interactions=[],a.each(g,function(){f.interactions.push(c.interaction(this,f))})),f.propagates=
f.interactions.length,!1!==f.drop&&d.drop&&d.drop.handler(e,f),c.textselect(!1),b.add(document,"mousemove mouseup",c.handler,f),!1},interaction:function(b,d){return{drag:b,callback:new c.callback,droppable:[],offset:a(b)[d.relative?"position":"offset"]()||{top:0,left:0}}},handler:function(a){var f=a.data;switch(a.type){case !f.dragging&&"mousemove":if(Math.pow(a.pageX-f.pageX,2)+Math.pow(a.pageY-f.pageY,2)<Math.pow(f.distance,2))break;a.target=f.target;c.hijack(a,"dragstart",f);f.propagates&&(f.dragging=
!0);case "mousemove":if(f.dragging){c.hijack(a,"drag",f);if(f.propagates){!1!==f.drop&&d.drop&&d.drop.handler(a,f);break}a.type="mouseup"}case "mouseup":b.remove(document,"mousemove mouseup",c.handler),f.dragging&&(!1!==f.drop&&d.drop&&d.drop.handler(a,f),c.hijack(a,"dragend",f)),c.textselect(!0),!1===f.click&&f.dragging&&(jQuery.event.triggered=!0,setTimeout(function(){jQuery.event.triggered=!1},20),f.dragging=!1)}},delegate:function(d){var f=[],g,h=a.data(this,"events")||{};a.each(h.live||[],function(h,
v){0===v.preType.indexOf("drag")&&(g=a(d.target).closest(v.selector,d.currentTarget)[0])&&(b.add(g,v.origType+"."+c.livekey,v.origHandler,v.data),0>a.inArray(g,f)&&f.push(g))});return f.length?a(f).bind("dragend."+c.livekey,function(){b.remove(this,"."+c.livekey)}):!1},hijack:function(d,f,g,h,n){if(g){var v=d.originalEvent,m=d.type,l=f.indexOf("drop")?"drag":"drop",r,s=h||0,t,p;h=isNaN(h)?g.interactions.length:h;d.type=f;d.originalEvent=null;g.results=[];do!(t=g.interactions[s])||"dragend"!==f&&t.cancelled||
(p=c.properties(d,g,t),t.results=[],a(n||t[l]||g.droppable).each(function(h,m){r=(p.target=m)?b.handle.call(m,d,p):null;!1===r?("drag"==l&&(t.cancelled=!0,--g.propagates),"drop"==f&&(t[l][h]=null)):"dropinit"==f&&t.droppable.push(c.element(r)||m);"dragstart"==f&&(t.proxy=a(c.element(r)||t.drag)[0]);t.results.push(r);delete d.result;if("dropinit"!==f)return r}),g.results[s]=c.flatten(t.results),"dropinit"==f&&(t.droppable=c.flatten(t.droppable)),"dragstart"!=f||t.cancelled||p.update());while(++s<h);
d.type=m;d.originalEvent=v;return c.flatten(g.results)}},properties:function(a,b,d){var h=d.callback;h.drag=d.drag;h.proxy=d.proxy||d.drag;h.startX=b.pageX;h.startY=b.pageY;h.deltaX=a.pageX-b.pageX;h.deltaY=a.pageY-b.pageY;h.originalX=d.offset.left;h.originalY=d.offset.top;h.offsetX=a.pageX-(b.pageX-h.originalX);h.offsetY=a.pageY-(b.pageY-h.originalY);h.drop=c.flatten((d.drop||[]).slice());h.available=c.flatten((d.droppable||[]).slice());return h},element:function(a){if(a&&(a.jquery||1==a.nodeType))return a},
flatten:function(b){return a.map(b,function(b){return b&&b.jquery?a.makeArray(b):b&&b.length?c.flatten(b):b})},textselect:function(b){a(document)[b?"unbind":"bind"]("selectstart",c.dontstart).attr("unselectable",b?"off":"on").css("MozUserSelect",b?"":"none")},dontstart:function(){return!1},callback:function(){}};c.callback.prototype={update:function(){d.drop&&this.available.length&&a.each(this.available,function(a){d.drop.locate(this,a)})}};d.draginit=d.dragstart=d.dragend=c})(jQuery);
(function(a){a.fn.jqDrag=function(a){return e(this,a,"d")};a.fn.jqResize=function(a){return e(this,a,"r")};a.jqDnR={dnr:{},e:0,drag:function(a){"d"==d.k?c.css({left:d.X+a.pageX-d.pX,top:d.Y+a.pageY-d.pY}):c.css({width:Math.max(a.pageX-d.pX+d.W,0),height:Math.max(a.pageY-d.pY+d.H,0)});return!1},stop:function(){c.css("opacity",1);a(document).unbind("mousemove",b.drag).unbind("mouseup",b.stop)}};var b=a.jqDnR,d=b.dnr,c=b.e,e=function(b,e,h){return b.each(function(){e=e?a(e,b):b;e.bind("mousedown",{e:b,
k:h},function(b){var e=b.data,f={};c=e.e;if("relative"!=c.css("position"))try{c.position(f)}catch(g){}d={X:f.left||parseInt(c.css("left"))||!1||0,Y:f.top||parseInt(c.css("top"))||!1||0,W:parseInt(c.css("width"))||!1||c[0].scrollWidth||0,H:parseInt(c.css("height"))||!1||c[0].scrollHeight||0,pX:b.pageX,pY:b.pageY,k:e.k,o:c.css("opacity")};c.css({opacity:.8});a(document).mousemove(a.jqDnR.drag).mouseup(a.jqDnR.stop);return!1})})}})(jQuery);
(function(a){a.fn.hoverIntent=function(b,d){var c={sensitivity:7,interval:100,timeout:0},c=a.extend(c,d?{over:b,out:d}:b),e,f,g,h,n=function(a){e=a.pageX;f=a.pageY},v=function(b,d){d.hoverIntent_t=clearTimeout(d.hoverIntent_t);if(Math.abs(g-e)+Math.abs(h-f)<c.sensitivity)return a(d).unbind("mousemove",n),d.hoverIntent_s=1,c.over.apply(d,[b]);g=e;h=f;d.hoverIntent_t=setTimeout(function(){v(b,d)},c.interval)},m=function(b){for(var d=("mouseover"==b.type?b.fromElement:b.toElement)||b.relatedTarget;d&&
d!=this;)try{d=d.parentNode}catch(e){d=this}if(d==this)return!1;var f=jQuery.extend({},b),m=this;m.hoverIntent_t&&(m.hoverIntent_t=clearTimeout(m.hoverIntent_t));"mouseover"==b.type?(g=f.pageX,h=f.pageY,a(m).bind("mousemove",n),1!=m.hoverIntent_s&&(m.hoverIntent_t=setTimeout(function(){v(f,m)},c.interval))):(a(m).unbind("mousemove",n),1==m.hoverIntent_s&&(m.hoverIntent_t=setTimeout(function(){m.hoverIntent_t=clearTimeout(m.hoverIntent_t);m.hoverIntent_s=0;c.out.apply(m,[f])},c.timeout)))};return this.mouseover(m).mouseout(m)}})(jQuery);
(function(a){a.fn.supersubs=function(b){var d=a.extend({},a.fn.supersubs.defaults,b);return this.each(function(){var b=a(this),e=a.meta?a.extend({},d,b.data()):d,f=a('<li id="menu-fontsize">&#8212;</li>').css({padding:0,position:"absolute",top:"-999em",width:"auto"}).appendTo(b).width();a("#menu-fontsize").remove();$ULs=b.find("ul");$ULs.each(function(b){b=$ULs.eq(b);var c=b.children(),d=c.children("a"),v=c.css("white-space","nowrap").css("float"),m=b.add(c).add(d).css({"float":"none",width:"auto"}).end().end()[0].clientWidth/
f,m=m+e.extraWidth;m>e.maxWidth?m=e.maxWidth:m<e.minWidth&&(m=e.minWidth);m+="em";b.css("width",m);c.css({"float":v,width:"100%","white-space":"normal"}).each(function(){var b=a(">ul",this),c=void 0!==b.css("left")?"left":"right";b.css(c,m)})})})};a.fn.supersubs.defaults={minWidth:9,maxWidth:25,extraWidth:0}})(jQuery);
(function(a){a.fn.superfish=function(b){var c=a.fn.superfish,e=c.c,f=a(['<span class="',e.arrowClass,'"> &#187;</span>'].join("")),g=function(){var b=a(this),c=n(b);clearTimeout(c.sfTimer);b.showSuperfishUl().siblings().hideSuperfishUl()},h=function(){var b=a(this),d=n(b),e=c.op;clearTimeout(d.sfTimer);d.sfTimer=setTimeout(function(){e.retainPath=-1<a.inArray(b[0],e.$path);b.hideSuperfishUl();e.$path.length&&1>b.parents(["li.",e.hoverClass].join("")).length&&g.call(e.$path)},e.delay)},n=function(a){a=
a.parents(["ul.",e.menuClass,":first"].join(""))[0];c.op=c.o[a.serial];return a};return this.each(function(){var n=this.serial=c.o.length,m=a.extend({},c.defaults,b);m.$path=a("li."+m.pathClass,this).slice(0,m.pathLevels).each(function(){a(this).addClass([m.hoverClass,e.bcClass].join(" ")).filter("li:has(ul)").removeClass(m.pathClass)});c.o[n]=c.op=m;a("li:has(ul)",this)[a.fn.hoverIntent&&!m.disableHI?"hoverIntent":"hover"](g,h).each(function(){m.autoArrows&&a(">a:first-child",this).addClass(e.anchorClass).append(f.clone())}).not("."+
e.bcClass).hideSuperfishUl();var l=a("a",this);l.each(function(a){var b=l.eq(a).parents("li");l.eq(a).focus(function(){g.call(b)}).blur(function(){h.call(b)})});m.onInit.call(this)}).each(function(){var b=[e.menuClass];!c.op.dropShadows||a.browser.msie&&7>a.browser.version||b.push(e.shadowClass);a(this).addClass(b.join(" "))})};var b=a.fn.superfish;b.o=[];b.op={};b.IE7fix=function(){var d=b.op;a.browser.msie&&6<a.browser.version&&d.dropShadows&&void 0!=d.animation.opacity&&this.toggleClass(b.c.shadowClass+
"-off")};b.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"};b.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:!0,dropShadows:!0,disableHI:!1,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};a.fn.extend({hideSuperfishUl:function(){var d=b.op,c=!0===d.retainPath?d.$path:"";d.retainPath=!1;c=a(["li.",
d.hoverClass].join(""),this).add(this).not(c).removeClass(d.hoverClass).find(">ul").hide().css("visibility","hidden");d.onHide.call(c);return this},showSuperfishUl:function(){var a=b.op,c=this.addClass(a.hoverClass).find(">ul:hidden").css("visibility","visible");b.IE7fix.call(c);a.onBeforeShow.call(c);c.animate(a.animation,a.speed,function(){b.IE7fix.call(c);a.onShow.call(c)});return this}})})(jQuery);
